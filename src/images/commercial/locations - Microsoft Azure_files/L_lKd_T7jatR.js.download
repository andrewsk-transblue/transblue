define("FxInternal/Controls/BaseResourceDropDown",["require","exports","Fx/Controls/CustomHtml","FxInternal/Controls/DropDown","FxInternal/Utils/ValidationHelper","FxInternal/ResourceManagement/Policies"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){function s(n,t,i){var f=n&&n.createChildLifetime(),o=t.observable(),s=i.observable(),r,u,e=function(){r&&!r.isDisposed||(r=t.observable.subscribe(f,(function(n){var u=t.map(n);u!==i.observable()&&(r.dispose(),i.observable(t.map(n)),e())}),i));u&&!u.isDisposed||(u=i.observable.subscribe(f,(function(n){var r=i.map(n);r!==t.observable()&&(u.dispose(),t.observable(i.map(n)),e())}),i))},h=function(n){return!MsPortalFx.isUndefined(n)};return h(o)?i.observable(t.map(o)):h(s)&&t.observable(i.map(s)),e(),f}var t=MsPortalFx.Resources.Strings,e=t.ViewModels.Controls.CreatorAndComboBox,o=(function(){function n(n,t,u,f,o){var h=this,y,p,w,d,l,c,tt,k,it,rt;this.controlType=124;this.vmKind="Fx";this.labelPosition=ko.observable();this._msPortalFxRequired=ko.observable();this._msPortalFxLeftLabelWidth=ko.observable();this._fetching=ko.observable(!0);this._fetchingId=0;this.fetchedValues=ko.observableArray();this.outerCssClass=o;this._valueKeyMap=f;this._value=ko.isObservable(t.value)?t.value:ko.observable(t.value);p=ko.observable();w=ko.pureComputed((function(){var n=ko.unwrap(t.topItemValue);return(n?[n]:[]).concat(h.fetchedValues()).filter((function(n){return!!n}))}));s(n,{observable:this._value,map:function(n){return h._valueKeyMap(n)}},{observable:p,map:function(n){return MsPortalFx.find(w().concat([h.value()]),(function(t){return t&&h._valueKeyMap(t)===n}))}});this._validations=ko.isObservable(t.validations)?t.validations:ko.observableArray(t.validations||[]);ko.computed(n,(function(){var n=ko.unwrap(t.noWrapValidations)||[];return ko.unwrap(h._validations).map((function(t){if(t.type===21&&!n.includes(t)){var i=t;return i.wrappedValidate||(i.wrappedValidate=i.validate,i.validate=function(){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return i.wrappedValidate.apply(i,__spreadArray([h._value.peek()],t,!1))}),i}return t}))})).subscribeAndRun(n,t.validations=ko.observableArray());t.grouping&&(l=t.grouping.map,c=t.grouping.sort,d=t.grouping.mapToHtml);t.onFetchedValues&&this.fetchedValues.subscribe(n,(function(n){return t.onFetchedValues([].concat(n))}));c=c||function(){return 0};var a=ko.observableArray(),ut=((y=t.hiding)===null||y===void 0?void 0:y.hide)||MsPortalFx.wrap(!1),b=ko.observable(),g=t.sort?null:function(n,t){return MsPortalFx.compare(n.text,t.text)},ft=t.sort||MsPortalFx.wrap(0),et=t.cssClass||ko.observable(""),ot=function(n){return ut(n)?(b(t.hiding.reason),!1):!0},v=l,nt=c;t.disable&&(l=l||function(){return""},v=function(n){var i;return(i=t.disable(n))&&a.push(i),i||l(n)},nt=function(n,t){var i=a.indexOf(n),r=a.indexOf(t);return~i&&!~r?1:!~i&&~r?-1:c&&c(n,t)||0});tt=ko.pureComputed((function(){var f=ko.unwrap(t.topItemValue),i=ko.unwrap(d)||{},n,r,s,o,c;return(b(null),n=w().filter(ot).sort((function(n,t){return n===f?-1:t===f?1:ft(n,t)})).map((function(n){var t=u(n);return n===f&&(t.text=e.newItemText.format(t.text)),t})),n=g?n.sort(g):n,v)?(r=n.reduce((function(n,t){var r,u=v(t.value),f=(r=i===null||i===void 0?void 0:i[u])===null||r===void 0?void 0:r.itemAriaLabel;return f&&(t.ariaLabel="".concat(f," ").concat(t.text)),(n[u]=n[u]||[]).push(t),t.value=h._valueKeyMap(t.value),n}),{}),s=Object.keys(r).sort(nt).reduce((function(n,t){return t?(n.push({children:r[t],text:i[t]||t,disabled:!!~a.indexOf(t)}),n):n.concat(r[t])}),[]),a([]),s):(o=ko.unwrap(t.header),c=o?[o]:[],c.concat(v?n:n.map((function(n){return n.value=h._valueKeyMap(n.value),n}))))})).extend({deferred:!0});k=ko.observableArray();tt.subscribeAndRun(n,(function(n){k(n)}));this.subLabel=MsPortalFx.initObservable(t.subLabel);it=t.subLabel;rt={htmlTemplate:'\n                        <!--ko if: fxSubLabel-->\n                           <div data-bind="pcCustomHtmlField: fxSubLabel"><\/div>\n                        <!-- /ko -->\n                        <!--ko if: reason-->\n                            <div data-bind="text: reason"><\/div>\n                        <!-- /ko -->\n                        <!--ko if: subLabel-->\n                           <div data-bind="pcCustomHtmlField: subLabel"><\/div>\n                        <!-- /ko -->\n                ',viewModel:{reason:b,fxSubLabel:t.fxSublabel,subLabel:ko.pureComputed((function(){var t=ko.unwrap(it);if(typeof t=="string")return i.create(n,{htmlTemplate:t});var r=t||{},f=r.viewModel,u=r.htmlTemplate;return u?i.create(n,{htmlTemplate:u,innerViewModel:f,isolated:!0}):null}))}};delete t.subLabel;this._fxDropDown=new r.ViewModel(n,MsPortalFx.extend(t,{cssClass:et,items:k,loading:this._fetching,value:p,subLabel:rt}));this.control=ko.observable(this._fxDropDown);this.valid=ko.computed(n,{read:function(){return h.control().valid()},write:function(n){return h.control().valid(n)}});this.labelPosition=ko.computed(n,{read:function(){return h.control().labelPosition()},write:function(n){return h.control().labelPosition(n)}});this._msPortalFxRequired=ko.computed(n,{read:function(){return h.control()._msPortalFxRequired()},write:function(n){return h.control()._msPortalFxRequired(n)}});this._msPortalFxLeftLabelWidth=ko.computed(n,{read:function(){return h.control()._msPortalFxLeftLabelWidth()},write:function(n){return h.control()._msPortalFxLeftLabelWidth(n)}});t.onIsPopUpOpen&&this._fxDropDown.isPopUpOpen.subscribe(n,t.onIsPopUpOpen)}return Object.defineProperty(n.prototype,"dirty",{get:function(){return this._fxDropDown.dirty},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"enableValidation",{get:function(){return this._fxDropDown.enableValidation},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ensureValidation",{get:function(){return this._fxDropDown.ensureValidation},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this._fxDropDown.label},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"validations",{get:function(){return this._validations},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"validationResults",{get:function(){return this._fxDropDown.validationResults},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"disabled",{get:function(){return this._fxDropDown.disabled},enumerable:!1,configurable:!0}),n.prototype.triggerValidation=function(n){return u.tryOnTriggerValidation(this),this._fxDropDown.triggerValidation(n)},Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"loading",{get:function(){return this._fxDropDown.loading},enumerable:!1,configurable:!0}),n.prototype.selectInitialOrCurrent=function(n,t,i,r,u){var f=this;return i===void 0&&(i=!0),r===void 0&&(r=!0),u===void 0&&(u=!1),this._initialPromise.then((function(e){var s=f.value(),l=s&&[f._valueKeyMap(s)]||[],o=l.concat(e||[]).filter((function(n){return!!n})),h,c;u&&(h=o.map((function(n){return n.toLowerCase()})),o=h);f.fetchedValues(n.slice(0));(o.length||i)&&(c=n.filter((function(n){var t=f._valueKeyMap(n);return u&&(t=(t!==null&&t!==void 0?t:"").toLowerCase()),!!~o.indexOf(t)})).sort((function(n,t){return MsPortalFx.compare(MsPortalFx.findIndex(o,(function(t){var i=f._valueKeyMap(n);return u&&(t=(t!==null&&t!==void 0?t:"").toLowerCase(),i=i.toLowerCase()),t===i})),MsPortalFx.findIndex(o,(function(n){var i=f._valueKeyMap(t);return u&&(n=(n!==null&&n!==void 0?n:"").toLowerCase(),i=i.toLowerCase()),n===i})))})).concat(n)[0],r&&f.value(c));~[null,undefined].indexOf(f.value())&&f.value(t)}))},n.createPolicyValidation=f.PolicyValidationFactoryImpl.createPolicyValidation,n.createControlPlaneValidator=f.PolicyValidationFactoryImpl.createControlPlaneValidator,n})();n.ViewModel=o})(e||(e={})),e}));
define("FxInternal/ResourceManagement/Locations",["require","exports","Fx/DependencyInjection","FxHubs/ArmHelpers/ArmApis","FxHubs/ArmHelpers/ArmApisStartup","Fx/Ajax","Fx/Telemetry"],(function(n,t,i,r,u,f,e){"use strict";function p(n){var t=u.listLocationsAtScopeApi(n);return Q(f.batch({uri:t,type:"GET",setTelemetryHeader:o+".getLocForSub"}).then((function(t){if(t.content&&t.content.value)return t.content.value;throw new Error("Error getting locations at scope "+n);})))}function w(n){var t=u.listSubscriptionLocationsApi(n);return Q(f.batch({uri:t,type:"GET",setTelemetryHeader:o+".getLocForSub"}).then((function(t){if(t.content&&t.content.value)return t.content.value;throw new Error("Error getting locations for subscription "+n);})))}function l(n,t,f){return t===void 0&&(t=[]),f===void 0&&(f=""),__awaiter(this,void 0,void 0,(function(){var d,c,tt,it,l,a,b,e,g,k,nt,rt;return __generator(this,(function(ut){switch(ut.label){case 0:return(rt=i.container.get(h)).setResourceTypes.apply(rt,t),d=[],c=[],tt=t.map((function(t){t=t.toLowerCase();var i=t.indexOf("/"),u=t.slice(0,i);return d.push(t.slice(i+1)),{uri:n?r.getResourceProviderWithSubscriptionApi(n,u):r.getResourceProviderAtScope(f,u),arrayResponse:!1,telemetry:o+".getLocForResTypes"}})),it=u.callBatchWithContinuation(tt,(function(n){c.push(n)}),(function(n){var r=t[c.length],u=n.reason&&n.reason.content,i=n.reason&&n.reason.httpStatusCode;if(i>=400){s.warning("Could not get locations for resource type '".concat(r,"': (").concat(i,") ")+JSON.stringify(u));return}c.push(null)}),!1),l={},[4,Q.all([n?w(n):p(f),it])];case 1:return(a=ut.sent()[0],!!t.length)?[3,3]:[4,Q(a.filter((function(n){return!n.metadata||n.metadata.regionType.toLowerCase()==="physical"})))];case 2:return b=ut.sent(),b=b.length?b:a,[2,{locations:b,resourceTypeApis:l}];case 3:try{c.forEach((function(n,i){var f,r,u;if(!n)return null;if(f=t[i],r=n&&MsPortalFx.find(n.resourceTypes,(function(n){return n.resourceType.toLowerCase()===d[i]})),!r){s.warning("Resource type '".concat(f,"' not found in list of returned resource types."));e=[];return}l["".concat(n.namespace,"/").concat(r.resourceType)]=r.apiVersions;u=r.locations;e=e?e.filter((function(n){return!!~u.indexOf(n)})):u}));e=(e||[]).sort()}catch(ft){ft=ft||{};s.warning("Falling back to subscription locations. Error: "+(ft.message||JSON.stringify(ft)))}return(g=[],k=e.map((function(n){return n.replace(/ /g,"").toLowerCase()})),nt=(a||[]).filter((function(n){var t=y(n.name).toLowerCase();if(k.includes(t))return g.push(t),!0})).concat(k.filter((function(n){return!g.includes(n)})).map((function(i){var r=e[k.indexOf(i)],u="The following resource types returned '".concat(r,"' as a valid location which was not in list of all locations returned from ARM: [").concat(t.join(", "),"]");return v.trace({source:o,action:"RPLocsMissingForUser",data:{message:u,subscriptionId:n,resourceTypes:t}}),{name:i,displayName:r,regionalDisplayName:r,metadata:{regionCategory:"ServiceProvided",regionType:"Manifest"}}}))),!nt.length)?(s.warning("No locations returned for resource types: '".concat(t.join(", "),"'. Falling back to subscription locations.")),[2,{locations:a,resourceTypeApis:l}]):[2,{locations:nt,resourceTypeApis:l}]}}))}))}function b(n,t,i){return t===void 0&&(t=[]),i===void 0&&(i=""),Q(l(n,t,i).then((function(n){return n.locations})))}var h;Object.defineProperty(t,"__esModule",{value:!0});t.ArmResourceTypesTelemetry=t.getLocationsForCreate=t.getLocationsAndResourceTypesForCreate=void 0;var a=MsPortalFx.Base,c=a.Diagnostics,v=c.Telemetry,s=c.createLog(n),o="Services.ArmLocations",y=ko.unwrap;t.getLocationsAndResourceTypesForCreate=l;t.getLocationsForCreate=b;h=(function(){function t(){this._resourceType={};this._telemetryIds=[]}return Object.defineProperty(t.prototype,"telemetryId",{set:function(n){this._telemetryIds.push(n);this._telemetryIds.includes(n)||(this._resourceType[n]={})},enumerable:!1,configurable:!0}),t.prototype.traceComparisonToProvisionedResourceTypes=function(n){var r=this,t=this._telemetryIds[0],i;t&&this._resourceType[t]&&(i=Object.keys(n.reduce((function(n,i){return i in r._resourceType[t]||(n[i]=!0),n}),{})),e.trace({source:o,action:"ProvisionedResourceTypesMissingFromLocationDropdown",data:{missingKeys:i,telemetryId:t}}))},t.prototype.setResourceTypes=function(){for(var t,r=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];(t=this._telemetryIds[0],t&&this._resourceType[t])&&i.forEach((function(n){r._resourceType[t][n]=!0}))},t.prototype.popTelemetryId=function(){var t=this._telemetryIds.pop();if(!this._telemetryIds.includes(t)){var i=this._resourceType,n=t,u=i[n],r=__rest(i,[typeof n=="symbol"?n:n+""]);this._resourceType=r}return t},__decorate([__metadata("fx:diagnostics",[n,"ArmResourceTypesTelemetry"]),i.Class()],t)})();t.ArmResourceTypesTelemetry=h}));
define("FxInternal/Controls/LocationDropDown",["require","exports","FxInternal/Controls/BaseResourceDropDown","Fx/Controls/InfoBalloon","Fx","Fx/ResourceManagement","FxInternal/ResourceManagement/Locations","Fx/Composition","FxInternal/ResourceManagement/Policies"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){function c(n,t){var i=l[n],u=a[n];return{htmlTemplate:'<span data-bind="text: text"><\/span><span tabindex="0" data-bind="pcControl: infoBalloon"><\/span>',viewModel:{text:i,infoBalloon:r.create(t,{content:u})},itemAriaLabel:i}}var t=MsPortalFx.Resources.Strings.Azure.Locations.DropDown,l={Recommended:t.groupRecommended,Other:t.groupOther,ServiceProvided:t.groupServiceProvided},a={Recommended:t.groupRecommendedBubble,Other:t.groupOtherBubble,ServiceProvided:t.groupServiceProvidedBubble},h=u.isFeatureEnabled("regionSegments"),v=(function(n){function r(r,u){var e=this,k,d,nt={Recommended:c("Recommended",r),Other:c("Other",r),ServiceProvided:c("ServiceProvided",r)},a=ko.observable(),v=[],y=MsPortalFx.initObservable(u.value),g=__assign(__assign(__assign(__assign({label:ko.observable(t.defaultLabel),filter:!0,initialLocationName:null,subscriptionId:null},h?{grouping:{mapToHtml:nt,map:function(n){var t=n.metadata;return t?(v.includes(t.regionCategory)||v.push(t.regionCategory),t.regionCategory):"ServiceProvided"},sort:function(n,t){return MsPortalFx.compare(v.indexOf(n),v.indexOf(t))}},sort:MsPortalFx.wrap(0)}:{}),u.enableEdgeLocations&&u.subscriptionId&&"openBlade"in r?{subLabel:{htmlTemplate:'<a role="link" data-bind="fxclick: edgeLocationBladeReference">'.concat(t.edgeLocationSubLabel,"<\/a>"),viewModel:{edgeLocationBladeReference:function(){var t,n=ko.unwrap(u.subscriptionId);r.openContextPane(o.BladeReferences.forExtension("Microsoft_Azure_Compute").forBlade("EdgeZonesPicker.ReactView").createReference({parameters:{homeLocation:((t=y())===null||t===void 0?void 0:t.id)||"",subscriptionId:typeof n=="string"?n:n===null||n===void 0?void 0:n.subscriptionId},onClosed:function(n,t){n===2&&(t===null||t===void 0?void 0:t.id)&&(a(t),y(t))}}))}}}}:{}),u),{value:y}),p,l,w,b;return y.subscribe(r,(function(n){var t;n&&n.id!==((t=a())===null||t===void 0?void 0:t.id)&&a(null)})),p=ko.observable(),ko.computed(r,(function(){var n;return(n=ko.unwrap(u.validations)||[]).concat.apply(n,p()||[])})).subscribeAndRun(r,g.validations=ko.observableArray()),e=n.call(this,r,g,(function(n){return{text:(h?n.regionalDisplayName||n.displayName:n.displayName)||n.name,value:n}}),(function(n){return n&&n.name}))||this,l=(k=s.getProvisioningBladeDiContainer(r))===null||k===void 0?void 0:k.get(s.ProvisioningBladeDefaultPolicyAPI),w=u.resourceTypes||ko.observableArray(),p(i.ViewModel.createPolicyValidation({control:e,container:r,buildResourceDetails:function(n,t){var r=t===null||t===void 0?void 0:t.name,i=n.resourceContent=n.resourceContent||{};return i.location=r,i.type=(ko.unwrap(u.resourceTypes)||[])[0],n.apiVersion=((e._resourceTypeApis()||{})[i.type]||[])[0],n},pendingValues:{field:"location",valueToField:function(n){return n.name},fieldToDisplay:function(n,i){return{displayValue:(h?i.regionalDisplayName||i.displayName:i.displayName)||i.name,displayField:t.defaultLabel}}}})),(d=i.ViewModel.createControlPlaneValidator({control:e,container:r,resourceTypeProperty:"location"}))===null||d===void 0?void 0:d.subscribe(r,p),b=u.initialLocationName,e._locationsFromArm=ko.observableArray(),e._resourceTypeApis=ko.observable(),e._resourceTypeApis.fxAwait(r).then((function(){var n;"subscribe"in w?w.subscribeAndRun(r,(function(n){var t;(t=l===null||l===void 0?void 0:l.policyScope)===null||t===void 0?void 0:t.resourceTypesWithApiVersion(n.map((function(n){var t,i;return[n,(i=(t=e._resourceTypeApis())===null||t===void 0?void 0:t[n])===null||i===void 0?void 0:i[0],]})))})):(n=l===null||l===void 0?void 0:l.policyScope)===null||n===void 0?void 0:n.resourceTypesWithApiVersion(w.map((function(n){var t,i;return[n,(i=(t=e._resourceTypeApis())===null||t===void 0?void 0:t[n])===null||i===void 0?void 0:i[0],]})))})),e._initialPromise=ko.isObservable(b)?b.fxAwaitAndRun(r):Q(b),e._scope=ko.computed(r,(function(){var n=ko.unwrap(u.subscriptionId);return n?typeof n=="string"?f.ArmId.stringify({subscription:n,kind:1},1):f.ArmId.stringify({subscription:n.subscriptionId,kind:1},1):ko.unwrap(u.scope)})),e._scope.fxAwaitAndRun(r,(function(n){return!!n||n===""})).then((function(){return ko.computed(r,(function(){return[e._scope(),ko.unwrap(u.resourceTypes),]})).extend({deferred:!0}).subscribe(r,(function(){e.triggerValidation()}))})),Q.nextTick((function(){return ko.computed(r,(function(){return[e._scope(),ko.unwrap(u.resourceTypes)]})).subscribeAndRun(r,(function(n){!n[0]&&n[0]!==""||e._fetchItems(u)}))})),ko.computed(r,(function(){var n=a(),t=__spreadArray(__spreadArray([],n?[n]:[],!0),e._locationsFromArm(),!0);return u.customizeItems?u.customizeItems(t):t})).subscribe(r,(function(n){return e.selectInitialOrCurrent(n)})),e}return __extends(r,n),r.prototype._fetchItems=function(n){return __awaiter(this,void 0,void 0,(function(){var i,r,t;return __generator(this,(function(u){switch(u.label){case 0:i=++this._fetchingId;u.label=1;case 1:return u.trys.push([1,,3,4]),r=!h&&n.customFetch,this._fetching(!0),[4,r?r():e.getLocationsAndResourceTypesForCreate(null,ko.unwrap(n.resourceTypes)||[],this._scope())];case 2:return t=u.sent(),i===this._fetchingId&&("locations"in t?(this._locationsFromArm([].concat(t.locations)),this._resourceTypeApis(t.resourceTypeApis)):this._locationsFromArm(t)),[3,4];case 3:return i===this._fetchingId&&(this._fetchingId=0,this._fetching(!1)),[7];case 4:return[2]}}))}))},r})(i.ViewModel);n.ViewModel=v})(h||(h={})),h}));
define("Fx/Controls/LocationDropDown",["require","exports","FxInternal/Controls/LocationDropDown"],(function(n,t,i){"use strict";function r(n,t){var i;return ko.ignoreDependencies((function(){i=new u(n,t)})),i}function f(n,t){return r(n,t)}Object.defineProperty(t,"__esModule",{value:!0});t.createCustom=t.create=void 0;var u=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t})(i.ViewModel);t.create=r;t.createCustom=f}));
define("FxHubs/ArmHelpers/ArmLocks",["require","exports","FxHubs/ArmHelpers/ArmApis","Fx/Ajax","FxHubs/ArmHelpers/ArmIds","Fx/ResourceManagement"],(function(n,t,i,r,u,f){"use strict";function e(n,t){var i=(n||"").toLowerCase()+"/";return(t||"").toLowerCase().startsWith(i)}function s(n){return n.slice(0,n.lastIndexOf("/providers"))}function h(n){return Q(r.batch({uri:i.locksOnResourceApi(n),type:"GET"}).then((function(n){return n.content.value.map((function(n){return MsPortalFx.extend(n.properties,{notes:n.properties.notes||""}),n})).sort(a)})))}function c(n,t,i){if(i===void 0&&(i=!0),n=i?s(n):n,e(t,n))return 0;var r=f.ArmId.parse(n,!0);if(u.ResourceArmIdKindMap[r.kind]){if(t.toLowerCase()===n.toLowerCase())return 1;if(e(n,t))return 2}return r.kind===4?3:r.kind===1?4:void 0}function l(n){return h(n.resourceId).then((function(t){return t=t.filter((function(t){return o[t.properties.level]>=o[n.lockLevel]&&c(t.id,n.resourceId,!0)!==0})),!!t.length}))}function a(n,t){return n.name.localeCompare(t.name)}Object.defineProperty(t,"__esModule",{value:!0});t.getIsLocked=t.getScopeRelationshipEnum=t.getAllLocksForResource=t.getResourceIdFromLockScope=t.isParentResource=void 0;var o={CanNotDelete:1,ReadOnly:2};t.isParentResource=e;t.getResourceIdFromLockScope=s;t.getAllLocksForResource=h;t.getScopeRelationshipEnum=c;t.getIsLocked=l}));
define("FxInternal/ResourceManagement/ResourceGroups",["require","exports","FxHubs/ArmHelpers/ArmApisStartup"],(function(n,t,i){"use strict";function u(n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(){return[2,r(n).then((function(n){return n.map((function(n){var t;return{name:n.name,location:n.location,provisioningState:(t=n===null||n===void 0?void 0:n.properties)===null||t===void 0?void 0:t.provisioningState}}))}))]}))}))}function r(n){return __awaiter(this,void 0,void 0,(function(){var r,t;return __generator(this,(function(u){switch(u.label){case 0:return(r=(n||[]).filter((function(n){return!!n})).map((function(n){return{uri:i.resourceGroupsInSubscriptionApi(n),arrayResponse:!0,telemetry:"GetSubRGs"}})),!r.length)?[2,[]]:(t=[],[4,i.callBatchWithContinuation(r,(function(n){t.push.apply(t,n.filter(MsPortalFx.identity))}),(function(n){throw n;}),!1)]);case 1:return u.sent(),[2,t]}}))}))}Object.defineProperty(t,"__esModule",{value:!0});t.getArmResourceGroups=t.getResourceGroups=void 0;t.getResourceGroups=u;t.getArmResourceGroups=r}));
define("FxInternal/Controls/ResourceGroupDropDown",["require","exports","Fx/DependencyInjection","Fx/Controls/TextBox","Fx/Controls/CustomHtml","Fx/Controls/Validations","FxInternal/Controls/BaseResourceDropDown","Fx/ResourceManagement","FxHubs/ArmHelpers/ArmLocks","FxInternal/Utils/ValidationHelper","FxInternal/ResourceManagement/Permissions","FxInternal/ResourceManagement/ResourceGroups","FxInternal/ResourceManagement/Policies"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a){"use strict";function it(n,t){return n===t}function at(n,t){var i=!~[undefined,null].indexOf(n),r=!~[undefined,null].indexOf(t);return n=i?n:"",t=r?t:"",n===t}function p(n){var t=ko.unwrap(n);if(t)return t.subscriptionId||t}function ot(n,t){return n?"/subscriptions/".concat(n).concat(t?"/resourceGroups/".concat(t):""):""}function k(n,t){return t?(Object.defineProperty(t,"resourceId",{get:function(){return ot(p(n),t.name)}}),t):null}function st(n){return n===1?1:0}function ht(n,t){var i=ko.unwrap(t)||v.defaultLabel;switch(n){case 1:return v.createNewAriaLabel.format(i);case 0:return v.useExistingAriaLabel.format(i);default:return v.defaultAriaLabel.format(i)}}var ct;Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var rt=MsPortalFx.Base,g=rt.Constants,y=MsPortalFx.ViewModels,ut=rt.Diagnostics,nt=MsPortalFx.Resources.Strings,lt=FxImpl.Rpc,d=MsPortalFx.Azure,ft=d.ResourceGroups.Internal,w=y.getValidationResult,v=nt.Azure.ResourceGroups.DropDown,tt=nt.ViewModels.Controls.CreatorAndComboBox,b=nt.ResourceGroup.Validation,et=Q(w());ct=(function(n){function t(t,h){var l=this,oi,si,nt=MsPortalFx.extend({label:v.defaultLabel,sort:function(n,t){return MsPortalFx.compare(n.value.name,t.value.name)},filter:!0,filterPlaceholder:h.filterPlaceholder||tt.selectExisting},h),pt,hi,vt,ct,yt,bi,ri,ci,ui,ti,ki,di,rt,li,gi,nr,ei;nt.cssClass=h.nested?"msportalfx-nested-control":h.cssClass;pt=ko.isObservable(h.allowedMode)?h.allowedMode:ko.observable(typeof h.allowedMode!="undefined"?h.allowedMode:2);nt.allowedMode=pt;nt.subscriptionId=null||h.subscriptionId;var ii={name:"",location:"",provisioningState:""},bt={mode:1,value:ii},dt={mode:0,value:{name:"",location:""}},gt=ko.isWritableObservable(h.value)?h.value:ko.observable(h.value),kt=gt(),vi=kt||bt,yi={mode:0,value:{name:""}};kt&&(hi=pt(),(hi===2||hi===0&&kt.mode===0)&&(yi=kt));vt=ko.observable(yi);nt.value=vt;vt.equalityComparer=it;ct=ko.observable(st(pt()));ct.equalityComparer=it;var pi=h.validations,ni,tr=[new y.CustomValidationV(b.invalidMessage,function(n){return(gi.isFulfilled()?nr:Q(l._fetchItems(h,!!h.initialResourceGroupName))).then((function(){return l._fetching.fxAwaitAndRun(t,(function(n){return n===!1}))})).then((function(){return ft.validateResourceGroupName(n,p(h.subscriptionId),l.fetchedValues().map((function(n){return n.value.name})))}))}),new y.CustomValidationV(b.invalidMessage,function(n){return ni||(ni=new d.ReservedResourceNameValidator(g.ResourceTypes.ResourceGroups)),ni.validate(n)})],wi=ko.observableArray(),wt=ko.observable(vt()||MsPortalFx.clone(bt,!0));wt.equalityComparer=it;ko.computed(t,[vt],(function(n){n&&(ct(n.mode),wt&&wt(n))}));ko.computed(t,(function(){return(ko.unwrap(pi)||[]).map((function(n){var t,i,r;return n.type===21?(t=n,i=t.validate,"triggerSubscribable"in t)?(r=t.validate,t.validate=function(){return r(wt())},t):new f.CustomV({message:t.message,validate:function(){return i(wt())}}):n})).concat(tr)})).subscribeAndRun(t,wi);yt=ko.observable(pt()===2&&kt&&kt.mode===1?kt:null);bi=function(n){if(!n)return yt(null);var t=MsPortalFx.clone(bt,!0);t.value.name=n;t.value=k(h.subscriptionId,t.value);yt(t);vt(t)};nt.topItemValue=yt;ri=ko.observable(null);nt.fxSublabel=ri;ci=ko.pureComputed((function(){return ht(1,h.ariaLabel)}));nt.ariaLabel=ko.pureComputed((function(){return ht(pt(),h.ariaLabel)}));ui=FxImpl.lowerCaseStringMap();nt.onFetchedValues=function(n){n.forEach((function(n){var t=n.value.name;t&&ui.set(t.toLowerCase(),n)}))};ki=MsPortalFx.memoize((function(){return u.create(t,{cssClass:"fxt-resourcegroup-create-container",htmlTemplate:'<a class="fxt-resourcegroup-create" role="button" data-bind="attr: { aria-label: createNewAria }, text: createNew, fxclick: openSubCreate"><\/a>',innerViewModel:{createNew:tt.createNew,createNewAria:ko.pureComputed((function(){return"".concat(l.label(),": ").concat(tt.createNew)})),openSubCreate:function(){ti&&ti.dispose();ti=t.createChildLifetime();var u=[new y.RequiredValidation,new y.CustomValidationV(b.invalidMessage,function(n){return ft.validateResourceGroupName(n,p(h.subscriptionId),l.fetchedValues().map((function(n){return n.value.name})))}),new y.CustomValidationV(b.invalidMessage,function(n){return ni||(ni=new d.ReservedResourceNameValidator(g.ResourceTypes.ResourceGroups)),ni.validate(n)})],n=r.create(ti,{ariaLabel:ci,label:v.name,placeHolderText:nt.createNewPlaceholder,validations:u,value:yt()&&yt().value.name}),i=ko.observable(!1);ko.computed(ti,[n.valid,n.value],(function(){i(!(n.valid()&&n.value()&&n.value().length))}));void t.openDialog({telemetryName:"ResourceGroupCreateNewDialog",content:{htmlTemplate:'<div style="max-width: 320px"><div data-bind="text: description" style="margin-bottom: 25px"><\/div><div data-bind="pcControl: textbox"><\/div><\/div>',viewModel:{description:v.description,textbox:n}},buttons:[{button:4,disabled:i},{button:1},],target:".fxt-resourcegroup-create",title:null,onClosed:function(t){t.button===4&&bi(n.value())}})}}})}));pt.subscribeAndRun(t,(function(n){var i=ct(),t;return(ct(st(n)),!n)?(yt(null),ri(null)):(i===1&&rt&&rt()&&fi.valid()&&(t=MsPortalFx.clone(bt,!0),t.value.name=rt(),yt(t)),n===1&&!yt()&&rt&&rt(""),!n&&vt&&vt(dt),ri(ki()))}));di=ct()&&vi.value&&vi.value.name;rt=ko.observable(di||"");rt.equalityComparer=at;ko.computed(t,rt,(function(n){if(ct()===1){var t=MsPortalFx.clone(bt,!0);t.value.name=n;t.value=k(h.subscriptionId,t.value);wt&&wt(t)}}));Object.defineProperty(ii,"name",{get:rt,set:rt});k(h.subscriptionId,ii);var fi=r.create(t,{ariaLabel:ci,cssClass:nt.cssClass,infoBalloonContent:nt.infoBalloonContent,label:h.label||v.defaultLabel,placeHolderText:nt.createNewPlaceholder,value:rt,validations:wi}),ir=h.requiredPermissions,rr=new y.CustomValidation("",function(n){var t,i;return((t=n===null||n===void 0?void 0:n.value)===null||t===void 0?void 0:t.name)?(i=ot(p(nt.subscriptionId),n.value.name),s.getIsLocked({lockLevel:"ReadOnly",resourceId:i}).then((function(n){return w(n&&v.lockedValidationMessage)})).catch((function(){return ut.Log.writeEntry(1,"ResourceGroupValidation","Error checking read permissions. Defaulting to false."),w()}))):et}),ur=new y.CustomValidation("",function(n){return n.mode===0?et:Q.spread([i.container.get(c.PermissionChecker).hasPermission("/subscriptions/".concat(p(h.subscriptionId)),["Microsoft.Resources/subscriptions/resourcegroups/write"]),d.getSubscriptionInfo(p(h.subscriptionId)).then((function(n){return n.displayName})),],(function(n,t){return n?w():w(b.subscriptionHasNoPermissionsMessage.format(t))})).catch((function(){return ut.Log.writeEntry(1,"ResourceGroupValidation","Error checking resource group create permissions. Defaulting to true."),w()}))}),fr=e.ViewModel.createPolicyValidation({container:t,buildResourceDetails:function(n,t){var i,u=n.scope,e=o.ArmId.parse(u,!0).subscription,r=(i=t===null||t===void 0?void 0:t.value)===null||i===void 0?void 0:i.name,s,f;return r?(n.scope=r?o.ArmId.stringify({resourceGroup:r,subscription:e,kind:4},4):null,(t===null||t===void 0?void 0:t.mode)===1?{requestScope:u,resourceDetails:n}:{requestScope:n.scope,resourceDetails:n}):(s=n.scope,f=__rest(n,["scope"]),f)}});ko.computed(t,(function(){return __spreadArray(__spreadArray(__spreadArray([],ko.unwrap(pi)||[],!0),fr||[],!0),[rr,ur,],!1).map((function(n){return n.type!==21&&(n.map=n.map||function(){return wt().value.name}),n}))})).subscribeAndRun(t,nt.validations=ko.observableArray());l=n.call(this,t,nt,(function(n){return{text:n.value.name,value:n}}),(function(n){var t;if((t=n===null||n===void 0?void 0:n.value)!==null&&t!==void 0)return t.name}),"fxt-resourcegroup-dropdown")||this;li=(si=(oi=a.getProvisioningBladeDiContainer(t))===null||oi===void 0?void 0:oi.get(a.ProvisioningBladeDefaultPolicyAPI))===null||si===void 0?void 0:si.policyScope;li&&gt.subscribe(t,li.resourceGroup);pt.subscribeAndRun(t,(function(n){return l.control(n===1?fi:l._fxDropDown)}));gi=Q(l._fetching.fxAwait(t));nr=Q(l._fetching.fxAwait(t,(function(n){return!n})));l._textBox=fi;l._emptyControlValue=bt;l._emptyDropdownValue=dt;l._exposedValue=gt;l._baseOptions=nt;l._selectedMode=ct;l._newResourceGroup=yt;var ai=nt.initialResourceGroupName,er=ko.isObservable(ai)?Q(ai.fxAwaitAndRun(t)):Q(ai),or=FxImpl.Extension.getLastResourceIdInJourneyEndPoint.invoke(lt.client,g.Shell,null).then((function(n){var t=o.ArmId.parse(n,!0).resourceGroup;return t?[t]:[]}));return l._initialPromise=Q.all([er.then((function(n){return[].concat(n||[])})),or]).spread((function(n,t){return n.concat(t)})),ko.computed(t,[h.subscriptionId,pt],(function(){return pt()!==1||fi.value()?[ko.unwrap(h.subscriptionId)]:[]})).subscribeAndRun(t,(function(n){return n[0]&&l._fetchItems(h,pt()!==1)})),void h.subscriptionId.fxAwaitAndRun(t).then((function(){return ko.computed(t,(function(){return[ko.unwrap(ir),ko.unwrap(h.subscriptionId),ko.unwrap(l._fetching)===!1&&ct()&&yt(),]})).extend({deferred:!0}).subscribe(t,(function(){var n=wt();n&&n.value.name&&l.triggerValidation()}))})),ei=gt.subscribe(t,(function(n){var t,i;if(n=n||{mode:ct(),value:{name:rt(),location:"",provisioningState:""}},ct()!==n.mode&&l.switchMode(n.mode),t=ko.unwrap(l._baseOptions.allowedMode),t===1)rt(n.value.name);else{if(!n)return vt(dt);l._fetching()||(i=ui.get("".concat(n.value.name)),i||t!==2?n=i:yt(n));vt(n!==null&&n!==void 0?n:dt)}})),ko.computed(t,wt,(function(n){var i,r;if(n=n||{mode:ct(),value:{name:rt(),location:"",provisioningState:""}},ct(n.mode),n.mode===1)bt.value=ii,rt(n.value.name);else{if(!n)return vt(dt);l._fetching.peek()||(i=ui.get(n?"".concat(n.value.name):null),i&&(n=i));vt(n!==null&&n!==void 0?n:dt)}ei.dispose();r=MsPortalFx.clone(n,!0);k(h.subscriptionId,r.value);gt(r);ei=gt.subscribe(t,ei.callback)})),l._fxDropDown.visibleItemLimit=50,l}return __extends(t,n),Object.defineProperty(t.prototype,"value",{get:function(){return this._exposedValue},enumerable:!1,configurable:!0}),t.prototype.triggerValidation=function(){return h.tryOnTriggerValidation(this),ko.unwrap(this._baseOptions.allowedMode)===1?this._textBox.triggerValidation():this._fxDropDown.triggerValidation()},t.prototype.switchMode=function(n){var i=this._selectedMode,t=ko.unwrap(this._baseOptions.allowedMode),r;t!==2&&t!==undefined&&(t===0?this._exposedValue(this._emptyDropdownValue):this._exposedValue(this._newResourceGroup()||this._emptyControlValue),i(t));r=n===undefined?!i():!!n;n=r?1:0;i(n)},t.prototype._fetchItems=function(n,t){return t===void 0&&(t=!0),__awaiter(this,void 0,void 0,(function(){var i,r,u,f,e=this;return __generator(this,(function(o){switch(o.label){case 0:this._fetching(!0);i=++this._fetchingId;r=n.customFetch||function(){return Q(l.getResourceGroups([p(n.subscriptionId)]))};o.label=1;case 1:return o.trys.push([1,,4,5]),[4,r()];case 2:return(u=o.sent(),i!==this._fetchingId)?[2]:(f=u.filter((function(n){return!!n})).map((function(n){return{mode:0,value:k(e._baseOptions.subscriptionId,n)}})),[4,this.selectInitialOrCurrent(f,MsPortalFx.clone(this._emptyControlValue,!0),!1,t,!0)]);case 3:return o.sent(),[3,5];case 4:return ko.unwrap(this._baseOptions.allowedMode)===2&&this._newResourceGroup()&&this._fxDropDown.value(this._newResourceGroup().value.name),i===this._fetchingId&&(this._fetchingId=0,this._fetching(!1)),[7];case 5:return[2]}}))}))},t})(e.ViewModel);t.ViewModel=ct}));
define("Fx/Controls/ResourceGroupDropDown",["require","exports","FxInternal/Controls/ResourceGroupDropDown"],(function(n,t,i){"use strict";function u(n,t){var i;return ko.ignoreDependencies((function(){i=new r(n,t)})),i}Object.defineProperty(t,"__esModule",{value:!0});t.create=void 0;var r=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t})(i.ViewModel);t.create=u}));
define("FxInternal/Controls/SubscriptionDropDown",["require","exports","Fx/DependencyInjection","FxInternal/Controls/BaseResourceDropDown","FxHubs/RpcEndPoints","Fx/ResourceManagement","FxHubs/MarketplaceRpc","FxInternal/ResourceManagement/Policies"],(function(n,t,i,r,u,f,e,o){"use strict";function d(n,t){return e.validateSubscriptions(t,n)}function a(n){var t=n.status||n.state||"";return!k.includes(t.toLowerCase())}function g(n,t){if(t&&t.invalidSubscriptions.length)return MsPortalFx.find(t.invalidSubscriptions,(function(t){return t.subscriptionId===n.subscriptionId}))}function nt(n){if(!n.isPartialSet)return null;var t=n.subscriptions.length,r=!MsPortalFx.isFeatureEnabled("removesubsdropdownlimit")&&t>1e3,i="border-bottom: 1px solid; font-weight: normal; width: calc(100% + 8px);margin-left: -8px; padding: 0 8px; white-space: normal;";return{htmlTemplate:'<div style="'.concat(i,'">')+'<!-- ko if: selectedOnly --><p data-bind="attr: { title: selectedSubsTitle }"><span data-bind="text: selectedSubsPrefix"><\/span><a style="white-space: nowrap" href="#menu/directory" data-bind="text: globalSubscriptionFilter"><\/a><span data-bind="text: selectedSubsSuffix"><\/span><\/p><!-- /ko --><!-- ko if: tooManyToDisplay --><p data-bind="text: tooManyToDisplayMessage, attr: { title: tooManyToDisplayMessage }"><\/p><!-- /ko --><\/div>',viewModel:{selectedOnly:n.isPartialSet,selectedSubsTitle:s.showingSelectedSubsMessagePrefix+s.globalSubscriptionFilter+s.showingSelectedSubsMessageSuffix,selectedSubsPrefix:s.showingSelectedSubsMessagePrefix,selectedSubsSuffix:s.showingSelectedSubsMessageSuffix,globalSubscriptionFilter:s.globalSubscriptionFilter,tooManyToDisplay:r,tooManyToDisplayMessage:s.tooManyToDisplay.format(1e3,t),headerCss:i}}}function v(n,t){return __awaiter(this,void 0,void 0,(function(){var i,r;return __generator(this,(function(f){switch(f.label){case 0:return[4,u.Impl.getInSessionDisplayedSubscriptions(c.client)];case 1:return(i=f.sent(),t||!n)?[2,i]:[4,u.Impl.getSubscriptionsForSelectedDirectories(c.client,i.subscriptions)];case 2:return r=f.sent(),[2,__assign(__assign({},i),{subscriptions:r})]}}))}))}var y;Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=t.getDisplayedSubscriptions=void 0;var p=MsPortalFx.Base,w=p.Constants,l=MsPortalFx.ViewModels,b=FxImpl.Azure,c=FxImpl.Rpc,h=l.getValidationResultPromise,k=["enabled","active","pastdue"],s=MsPortalFx.Resources.Strings.Azure.Subscriptions.DropDown;t.getDisplayedSubscriptions=v;y=(function(n){function t(t,u){var e=this,v,y,rt=ko.observable(null),p=ko.observable(!1),k=ko.observable(!1),et=function(n){p()&&n&&e._fetchItems(u,!1)},ut=MsPortalFx.isFeatureEnabled("mspfilter"),d=MsPortalFx.extend({label:ko.observable(s.defaultLabel),filter:!0,header:rt,onIsPopUpOpen:et,grouping:ut?{map:function(n){var t=n.tenantId;if(!k())return"";var u=(t||"").toLowerCase(),i=e._directoryNameMap,r=k()&&i&&i[u];return r&&r.displayName||t||s.unknownTenant}}:undefined},u),ft=u.requiredPermissions,ot=r.ViewModel.createPolicyValidation({container:t,buildResourceDetails:function(n,t){var i=t===null||t===void 0?void 0:t.subscriptionId;return n.scope=f.ArmId.stringify({subscription:i,kind:1},1),n},resourceTypeProperty:undefined}),st=new l.CustomValidation(s.disabledSubscriptionValidationMessage,function(n){if(!n)return h();if(a(n))return h(s.disabledSubscriptionValidationMessage);var t=g(n,e._marketplaceValidation());return t?h(t.displayText||s.subscriptionNotAllowedForGalleryItemValidationMessage):b.canRegisterSubscriptionWithRPs(n.subscriptionId,ko.unwrap(u.resourceProviders)).then((function(t){if(!t.success){var i=n.uniqueDisplayName||n.subscriptionId,r=t.disallowedRPs||[];return r.length?h(s.subDisallowedRP.format(i,r.join(", "))):h(s.subCantRegisterWithRP.format(i,t.failedRPs.join(", ")))}})).then((function(t){return t?t:MsPortalFx.require("FxInternal/ResourceManagement/ArmTemplate").then((function(t){return t.hasPermission(i.container,"/subscriptions/".concat(n.subscriptionId),ft,s.requiredPermissionsValidationMessage)}))})).catch((function(){return h()}))}),nt,it;ko.computed(t,(function(){return __spreadArray(__spreadArray(__spreadArray([],ko.unwrap(u.validations)||[],!0),ot||[],!0),[st,],!1)})).subscribeAndRun(t,d.validations=ko.observableArray());e=n.call(this,t,d,(function(n){return{text:n.uniqueDisplayName||n.displayName||n.subscriptionId,value:n,disabled:a(n)}}),(function(n){return n&&n.subscriptionId}))||this;nt=(y=(v=o.getProvisioningBladeDiContainer(t))===null||v===void 0?void 0:v.get(o.ProvisioningBladeDefaultPolicyAPI))===null||y===void 0?void 0:y.policyScope;nt&&e.value.subscribe(t,nt.subscription);e._marketplaceValidation=ko.observable(null);e._headerGroup=rt;e._directoryNameMap=null;e._enableMspFilter=ut;var tt=d.initialSubscriptionId,ht=Promise.resolve(ko.isObservable(tt)?tt.fxAwaitAndRun(t):tt),ct=FxImpl.Extension.getLastResourceIdInJourneyEndPoint.invoke(c.client,w.Shell,null).then((function(n){var t=f.ArmId.parse(n,!0).subscription;return t?[t]:[]}));return e._initialPromise=Promise.all([ht.then((function(n){return[].concat(n||[])})),ct,]).then((function(n){var t=n[0],i=n[1];return t.concat(i)})),e._updateOnOpen=p,e._groupByDirectories=k,e._usingGlobalResourceFiltersPromise=new Promise(function(n){it=n}),u.customFetch||!MsPortalFx.isFeatureEnabled("globalresourcefilter")||FxImpl.internalEnv.isShell?it(!1):void f.onGlobalResourceFilterChange(t,(function(){it(!0);p(!0)})),ko.computed(t,(function(){return[ko.unwrap(ft),ko.unwrap(u.resourceProviders),]})).extend({deferred:!0}).subscribe(t,(function(){return e.triggerValidation()})),ko.computed(t,(function(){return[ko.unwrap(u.filterByGalleryItem),]})).extend({deferred:!0}).subscribeAndRun(t,(function(){return e._fetchItems(u)})),e}return __extends(t,n),t.prototype._getSubscriptions=function(){return __awaiter(this,void 0,void 0,(function(){var i,n,t;return __generator(this,(function(r){switch(r.label){case 0:return[4,this._usingGlobalResourceFiltersPromise];case 1:return i=r.sent(),[4,v(this._enableMspFilter,i)];case 2:return n=r.sent(),this._updateOnOpen(n.isPartialSet),t=nt(n),t?this._headerGroup({text:t}):this._headerGroup()&&this._headerGroup().text&&this._headerGroup(null),[2,n.subscriptions]}}))}))},t.prototype._fetchItems=function(n,t){var r=this,e=typeof t!="undefined"?t:!0,i,f;this._fetching(e);i=[];f=this._enableMspFilter?u.Impl.getDirectoriesMap(FxImpl.Rpc.client).then((function(n){r._directoryNameMap=n})):Q();Promise.all([((n===null||n===void 0?void 0:n.customFetch)||this._getSubscriptions).call(this),f,]).then((function(t){var u=t[0],f=t[1];return __awaiter(r,void 0,void 0,(function(){var t,f,r,e=this;return __generator(this,(function(){return(t=this._directoryNameMap,this._enableMspFilter&&t&&(f=u.some((function(n){var r=n.tenantId,i=t[(r||"").toLowerCase()];return!i||!(i.tenantCategory||"").toLowerCase().includes("home")})),this._groupByDirectories(f)),i=u,r=ko.unwrap(n.filterByGalleryItem),r)?[2,d(u,r).then((function(n){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return this._marketplaceValidation(n||{invalidSubscriptions:[]}),[4,this.selectInitialOrCurrent(i)];case 1:return t.sent(),this._fetching(!1),this.triggerValidation(),[2]}}))}))}))]:[2]}))}))})).finally((function(){Q.nextTick((function(){return __awaiter(r,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,this.selectInitialOrCurrent(i)];case 1:return n.sent(),this._fetching(!1),[2]}}))}))}))}))},t})(r.ViewModel);t.ViewModel=y}));
define("Fx/Controls/SubscriptionDropDown",["require","exports","FxInternal/Controls/SubscriptionDropDown"],(function(n,t,i){"use strict";function u(n,t){var i;return ko.ignoreDependencies((function(){i=new r(n,t)})),i}Object.defineProperty(t,"__esModule",{value:!0});t.create=void 0;var r=(function(n){function t(t,i){return n.call(this,t,i)||this}return __extends(t,n),t})(i.ViewModel);t.create=u}));
define("FxInternal/Controls/Summary",["require","exports","FxInternal/Controls/Base/Base"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var r=(function(n){function t(t,i){var r=n.call(this,t)||this;return i=i||{},r.controlType=134,r.visible=MsPortalFx.initObservable(i.visible,!0),r.cssClass=MsPortalFx.initObservable(i.cssClass,""),r.name=MsPortalFx.initObservable(i.name,""),r.children=MsPortalFx.initObservableArray(i.children,[]),r}return __extends(t,n),t})(i.ViewModel);t.ViewModel=r}));
define("Fx/Controls/Summary",["require","exports","FxInternal/Controls/Summary"],(function(n,t,i){"use strict";function r(n,t){var r;return ko.ignoreDependencies((function(){r=new i.ViewModel(n,t)})),r}Object.defineProperty(t,"__esModule",{value:!0});t.create=void 0;t.create=r}));
define("Fx/ResourceManagement/Policies",["require","exports","FxInternal/ResourceManagement/Policies"],(function(n,t,i){"use strict";function r(n){return new i.PolicyValidationFactoryImpl(n)}Object.defineProperty(t,"__esModule",{value:!0});t.createPolicyValidationFactory=void 0;t.createPolicyValidationFactory=r}));
define("FxHubs/ArmHelpers/ArmResources",["require","exports","Fx/Ajax"],(function(n,t,i){"use strict";function e(n){var t=n&&n.properties||{};return(t.provisioningState||"").toLowerCase()}function f(n,t){return Q(i.batch({uri:n,type:"GET",options:0,setTelemetryHeader:t}))}function o(n,t){return f(n,t).then((function(n){return n.content}))}function s(n){return n&&(n.jqXHR&&(n=r.buildSimplifiedError(n.jqXHR)),n.httpStatusCode&&(n=r.buildSimplifiedError(n)),n.status!==0||n.code||(n.code=u)),n}var r,u;Object.defineProperty(t,"__esModule",{value:!0});t.buildError=t.getArmResource=t.getRawArmResource=t.getProvisioningState=t.rpRegistrationCheckRetries=t.rpRegistrationCheckDelay=void 0;r=FxImpl.Azure;t.rpRegistrationCheckDelay=1e3;t.rpRegistrationCheckRetries=3;u="ClientNetworkError";t.getProvisioningState=e;t.getRawArmResource=f;t.getArmResource=o;t.buildError=s}));
define("FxHubs/ArmHelpers/ArmResourceGroups",["require","exports","Fx/Ajax","FxHubs/ArmHelpers/ArmApisStartup","FxHubs/ArmHelpers/ArmResources","Fx","FxHubs/RpcEndPoints","Fx/Telemetry"],(function(n,t,i,r,u,f,e,o){"use strict";function a(n,i,r,f){return f===void 0&&(f=t.resourceGroupCheckRetries),__awaiter(this,void 0,void 0,(function(){var e,o,c;return __generator(this,(function(y){switch(y.label){case 0:e=u.getProvisioningState(n);o=e;switch(o){case l.Succeeded:return[3,1];case l.Failed:return[3,1]}return[3,2];case 1:return v.verbose("Creating resource group ".concat(r," ").concat(e,".")),[2,n];case 2:return f?[4,new Promise(function(n){return setTimeout(n,t.resourceGroupCheckDelay)})]:(v.warning("Creating resource group ".concat(r,": Status unknown after ").concat(t.resourceGroupCheckRetries," attempts.")),[2,n]);case 3:return y.sent(),c=a,[4,u.getArmResource(i,"".concat(s).concat(h,".attempt").concat(t.resourceGroupCheckRetries-f))];case 4:return[4,c.apply(void 0,[y.sent(),i,r,f-1])];case 5:return[2,y.sent()]}}))}))}function y(n,u,l,v,y){return __awaiter(this,void 0,void 0,(function(){var nt,p,w,k,d,g,tt,b,it=this;return __generator(this,(function(rt){switch(rt.label){case 0:nt="/subscriptions/"+n+"/resourceGroups/"+u;p=r.resourceGroupApi(nt);w={source:v,name:"".concat(s).concat(h),action:"start"};o.trace(w);k=!1;rt.label=1;case 1:return rt.trys.push([1,4,,5]),[4,(function(){return __awaiter(it,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return(f.isFeatureEnabled("armTokenTest")||t.allowlistedExtensions[FxImpl.postBootEnv.extensionName])?[4,e.ResourceManager.internalDeploymentHelper.invoke(FxImpl.Rpc.client,c.Constants.Shell,{uri:p,type:"PUT",content:{name:u,location:l,tags:y},setTelemetryHeader:"".concat(v,".").concat(s).concat(h),options:0})]:[3,2];case 1:return[2,n.sent()];case 2:return[4,i.batch({uri:p,type:"PUT",content:{name:u,location:l,tags:y},setTelemetryHeader:"".concat(v,".").concat(s).concat(h),options:0})];case 3:return[2,n.sent()]}}))}))})()];case 2:return d=rt.sent(),b=d.httpStatusCode,k=!0,o.trace(__assign(__assign({},w),{data:{httpStatusCode:b},name:"failed"})),[4,a(d.content,p,u)];case 3:return[2,rt.sent()];case 4:g=rt.sent();k||(tt=g,b=tt.httpStatusCode,o.trace(__assign(__assign({},w),{data:{httpStatusCode:b},name:"failed"})));throw g;case 5:return[2]}}))}))}function p(n){return"#asset/".concat("HubsExtension","/ResourceGroups").concat(n)}function w(n){return"resource".concat(n,"/resources")}var c,l;Object.defineProperty(t,"__esModule",{value:!0});t.getDeepLinkToSubscription=t.getDeepLinkToResourceGroup=t.createResourceGroup=t.allowlistedExtensions=t.checkResourceGroupStatus=t.resourceGroupCheckDelay=t.resourceGroupCheckRetries=t.rpRegistrationCheckRetries=void 0;c=MsPortalFx.Base;l=MsPortalFx.Azure.ResourceManager.DeploymentStates;t.rpRegistrationCheckRetries=3;t.resourceGroupCheckRetries=5;t.resourceGroupCheckDelay=1e3;var v=c.Diagnostics.createLog(n),s="Deploy.",h="createRG";t.checkResourceGroupStatus=a;t.allowlistedExtensions={VMCP:!0,Citrix_XenApp_Essentials:!0,Citrix_XenDesktop_Essentials:!0,CloudSimpleExtension:!0,SendGrid_EmailService:!0};t.createResourceGroup=y;t.getDeepLinkToResourceGroup=p;t.getDeepLinkToSubscription=w}));
define("FxInternal/Composition/ExtensionTelemetry",["require","exports","Fx","Fx/DependencyInjection"],(function(n,t,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ExtensionTelemetry=void 0;var u=MsPortalFx.Base.Diagnostics.Telemetry,f=i.getEnvironmentValue("extensionName")==="fx"?"composition":"viewModel",e=(function(){function t(n){this._telemetryContextState=FxImpl.TelemetryContext.getState();this.extensionName=this._asyncGetCompositionProvenance(n).then((function(n){return n?n.locator.getExtensionLocator().name:i.getEnvironmentValue("extensionName")}));this.context=this._asyncGetPartContext(n).then((function(n){return n&&{Blade:{id:n.bladeId,instanceId:n.bladeInstanceId}}}))}return t.prototype._asyncGetPartContext=function(n){return n.scope==="viewModel"?n.getAsync(MsPortalFx.require("FxInternal/Composition/ViewModel").then((function(n){return n.PartContext}))):Promise.resolve(undefined)},t.prototype._asyncGetCompositionProvenance=function(n){return n.scope!=="viewModel"?n.getAsync(MsPortalFx.require("MsPortalImpl/Base/Base.ImplUtils").then((function(n){return n.CompositionProvenance}))):Promise.resolve(undefined)},t.prototype.trace=function(n){var t=this,i=Date.now();Promise.all([this.extensionName,this.context]).then((function(r){var o=r[0],s=r[1],e=__assign({timestamp:i,context:s},n);f!=="viewModel"?FxImpl.Extension.traceToExtensionEndPoint.invoke(FxImpl.Rpc.client,o,[e,t._telemetryContextState]):u.trace(e)}))},t.prototype.startTrace=function(n){var t=this,i=fx.getTimestamp();return function(r,e){var o=fx.getTimestamp();return Promise.all([t.extensionName,t.context]).then((function(s){var l=s[0],a=s[1],h=__assign({timestamp:i,context:a},n),c;if(f!=="viewModel")FxImpl.Extension.endTraceToExtensionEndPoint.invoke(FxImpl.Rpc.client,l,[h,o,r,e,t._telemetryContextState]);else return c=u.start(h),u.endTrace(c,r,e)})),o-i}},__decorate([__metadata("fx:diagnostics",[n,"ExtensionTelemetry"]),r.Class(f),__metadata("design:paramtypes",[r.Container])],t)})();t.ExtensionTelemetry=e}));
define("FxInternal/Composition/ViewModelAdapters.DoesProvisioning",["require","exports","Fx/DependencyInjection","Fx/Composition/Selectable","FxInternal/Composition/ViewModel","FxHubs/ProvisioningRpc","FxHubs/RpcEndPoints","Fx","FxInternal/ResourceManagement/Policies","FxHubs/MarketplaceRpc","FxInternal/ResourceManagement/Locations","FxInternal/Composition/ExtensionTelemetry"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";function d(n,t,r){var f=n.get(l.ExtensionTelemetry),e,u;return f.trace({name:t===null||t===void 0?void 0:t.id,source:"ProvisioningBladeAdapter",action:"ProvisioningBladeOpen",data:{telemetryId:r===null||r===void 0?void 0:r.telemetryId},context:t&&{Blade:t}}),e=f.startTrace({name:t===null||t===void 0?void 0:t.id,source:"ProvisioningBladeAdapter",action:"ProvisioningBladeClose",context:t&&{Blade:t}}),u=!1,function(n){if(i.container.get(c.ArmResourceTypesTelemetry).popTelemetryId(),!u){u=!0;var f=r.marketplaceItem||{};return e(n?"Success":"Abandon",{action:"ProvisioningBladeClose",data:MsPortalFx.extend({bladeContext:t===null||t===void 0?void 0:t.id,bladeInstanceId:t===null||t===void 0?void 0:t.instanceId,telemetryId:r.telemetryId,marketplaceItemId:f.id,launchingContext:f.launchingContext},n)})}}}function a(n){return n&&{galleryItem:n,launchingContext:n===null||n===void 0?void 0:n.launchingContext,subscriptionId:null,subscriptionDisplayName:null,resourceGroupName:null,resourceGroupLocation:null,resourceGroupLocationDisplayName:null,deploymentName:n===null||n===void 0?void 0:n.deploymentName,deploymentTemplateFileUris:n===null||n===void 0?void 0:n.deploymentTemplateFileUris,deploymentFragmentFileUris:n===null||n===void 0?void 0:n.deploymentFragmentFileUris}}function y(n){return{managementGroupId:n.managementGroupId,resourceGroupLocation:n.resourceGroupLocation,location:n.location,resourceProviders:n.resourceProviders,parameters:n.parameters,referenceParameters:n.referenceParameters,marketplaceItemId:n.marketplaceItemId,parametersLinkUri:n.parametersLinkUri,provisioningHash:n.provisioningHash,templateLinkUri:n.templateLinkUri,templateJson:n.templateJson,templateLink:n.templateLink,deploymentMode:n.deploymentMode,validateTemplate:n.validateTemplate,validationResult:n.validationResult,subscriptionId:n.subscriptionId,deploymentName:n.deploymentName,resourceGroupName:n.resourceGroupName,resourceId:n.resourceId,assetType:n.assetType,launchingContext:n.launchingContext,debug:n.debug,validateRetry:n.validateRetry}}function g(n,t,i,r,u,f,e){var p=this,s,h=i.marketplaceItem,o=new v.Provisioner(n,t,null,{supplyTemplateDeploymentOptions:function(){return Q(s)},supplyGalleryCreateOptions:function(){return a(h)}}),l=i.provisioningConfig,c,w=a(i.marketplaceItem),b={dontDiscardJourney:l&&l.dontDiscardJourney,galleryCreateOptions:w,supplyDashboardPartReference:function(n){return c&&c(n)||r(n)},provisioningEnabled:!0,launchPostCreate:!0};return o.provisioningConfig(b),function(n){var i=function(){return __awaiter(p,void 0,void 0,(function(){var i,l,r;return __generator(this,(function(a){switch(a.label){case 0:return[4,e()];case 1:return i=a.sent(),h=(i===null||i===void 0?void 0:i.marketplaceItem)||h,c=n.supplyPartReference,s=y(__assign({launchingContext:(r=i===null||i===void 0?void 0:i.marketplaceItem)===null||r===void 0?void 0:r.launchingContext},n)),u()||s.validateTemplate||o.traceValidation("DeployWithoutValidate"),l=o.startProvisioning(n.parameters),void o.deploymentStartedPromise.fxAwait(t).then((function(n){f(n);void t.closeCurrentBlade()})),[2,l]}}))}))};return Q(i())}}function nt(n){var r=this,t,i=o.memoizePromise((function(t){return Q(h.getMarketplaceContext(t,n.marketplaceItem.launchingContext))}));return{write:function(n){return i(t=n)},read:function(){return __awaiter(r,void 0,void 0,(function(){var n;return __generator(this,(function(r){switch(r.label){case 0:return(n=t,!n)?[3,2]:[4,i(t)];case 1:n=r.sent();r.label=2;case 2:return[2,n]}}))}))}}}function tt(n,t,i,r,u){var e=this,f=i.provisioningConfig;return function(o){return __awaiter(e,void 0,void 0,(function(){var e,a,v,s,h,c,l;return __generator(this,(function(y){switch(y.label){case 0:return[4,u()];case 1:return e=y.sent(),a=(f===null||f===void 0?void 0:f.dashboardPartReference)&&__assign({name:f.dashboardPartReference.partName,extension:f.dashboardPartReference.options.extensionName,parameters:(h={},h[f.dashboardPartReference.dashboardPartKeyId]=o.primaryResourceId,h)},e?{name:e.uiDefinition.createDefinition.startboardPart.name,extension:e.uiDefinition.createDefinition.startboardPart.extension,parameters:(c={},c[e.uiDefinition.createDefinition.startboardPartKeyId]=o.primaryResourceId,c)}:{}),v=__assign(__assign({notifications:{pinToDashboard:a},telemetryId:i.telemetryId,marketplaceItemId:(l=i.marketplaceItem)===null||l===void 0?void 0:l.id,galleryItemIconUri:i.marketplaceItem.mediumIconUri},e?{marketplaceItemId:e.marketplaceItem.id,galleryItemIconUri:e.marketplaceItem.mediumIconUri}:{}),o),[4,MsPortalFx.require("FxInternal/ResourceManagement/ArmTemplate")];case 2:return[4,y.sent().deployStack(n,v)];case 3:return s=y.sent(),r({correlationId:s.correlationId,primaryResourceId:s.primaryResourceId,deploymentId:s.deploymentId,provisioningState:s.provisioningState}),void t.closeCurrentBlade(),[2,s]}}))}))}}function it(n){return function(t){var i;return new r.PdlBladeReference("TemplateViewerBlade","HubsExtension",{parameters:{options:{templateLink:t.templateLinkUri||((i=t.templateLink)===null||i===void 0?void 0:i.uri),templateJson:t.templateJson,parameters:t.parameters,telemetryId:n.telemetryId}}})}}function rt(){return function(n){return new r.PdlBladeReference("ArmErrorsBlade","HubsExtension",{parameters:n})}}function ut(n,t,i){var r,u=new FxImpl.ViewModels.Provisioning.Provisioner(n,{supplyProvisioningPromise:function(){return r},supplyStartboardInfo:function(){return null}}),f=t.provisioningConfig,e={dontDiscardJourney:f&&f.dontDiscardJourney,provisioningEnabled:!0};return u.provisioningConfig(e),function(n){r=n.provisioningPromise;var t=Q(u.startProvisioning(null));return void t.then((function(){return i(!0)})),t}}function ft(n,t,i,r,u){var h=this,e,o=i.marketplaceItem,f=new v.Provisioner(n,t,null,{supplyTemplateDeploymentOptions:function(){return Q(e)},supplyGalleryCreateOptions:function(){return a(o)}}),s=i.provisioningConfig,c={dontDiscardJourney:s&&s.dontDiscardJourney,galleryCreateOptions:a(i.marketplaceItem),provisioningEnabled:!0};return f.provisioningConfig(c),function(s){return __awaiter(h,void 0,void 0,(function(){var h,c,a,v,p,w,b,k,d,l;return __generator(this,(function(g){switch(g.label){case 0:return[4,u()];case 1:return(h=g.sent(),o=(h===null||h===void 0?void 0:h.marketplaceItem)||o,r(!1),e=__assign(__assign({},y(__assign({launchingContext:(l=h===null||h===void 0?void 0:h.marketplaceItem)===null||l===void 0?void 0:l.launchingContext},s))),{telemetryId:i.telemetryId}),c=s.formValidationOptions||{},a=MsPortalFx.initValue(c.validateForm,n.scope==="viewModel"),!a)?[3,6]:(v=MsPortalFx.initValue(c.focusOnFirstInvalid,!1),p=!!c.validateHidden,[4,t.form.triggerValidation(v,p)]);case 2:if(w=g.sent(),!w)return f.traceValidation("FailedFormValidation"),[2,e];g.label=3;case 3:return g.trys.push([3,5,,6]),[4,f.validateTemplate(e)];case 4:return b=g.sent(),r(!0),f.traceValidation("PassedValidation"),[2,b];case 5:k=g.sent();f.traceValidation("FailedArmValidation");throw k;case 6:return d=f.validateTemplate(e),[2,d]}}))}))}}function p(n,t,r,u,f,e,o){var k=this,h,l,p,a;if(!r)throw new Error("This provisioning blade has been launched with invalid inputs from marketplace. Please ensure the $schema property in your gallery package UIDefinition.json is updated to 'https://gallery.azure.com/schemas/2018-02-12/UIDefinition.json#'");h=r.provisioningConfig;p=function(n){var t,i,r,u,f,e,o,s,c=l?{partName:(r=(i=l===null||l===void 0?void 0:l.createDefinition)===null||i===void 0?void 0:i.startboardPart)===null||r===void 0?void 0:r.name,partKey:(u=l===null||l===void 0?void 0:l.createDefinition)===null||u===void 0?void 0:u.startboardPartKeyId,partExtension:(f=l===null||l===void 0?void 0:l.createDefinition)===null||f===void 0?void 0:f.startboardPart.extension}:(h===null||h===void 0?void 0:h.dashboardPartReference)?{partName:(e=h===null||h===void 0?void 0:h.dashboardPartReference)===null||e===void 0?void 0:e.partName,partKey:(o=h===null||h===void 0?void 0:h.dashboardPartReference)===null||o===void 0?void 0:o.dashboardPartKeyId,partExtension:(s=h===null||h===void 0?void 0:h.dashboardPartReference)===null||s===void 0?void 0:s.options.extensionName}:{partName:"",partKey:"",partExtension:""},a=c.partExtension,v=c.partKey,y=c.partName;return y&&v&&a&&new MsPortalFx.Composition.PartReference(y,(t={},t[v]=n,t),{extensionName:a})};i.container.get(c.ArmResourceTypesTelemetry).telemetryId=r.telemetryId;n.scope==="viewModel"&&(a=n.get(s.ProvisioningBladeDefaultPolicyAPI),a.policyApiFlag=e,s.setProvisioningBladeDiContainer(u,n));var w=ko.observable(!1),v=d(n,f,r),b=nt(r),y=b.read,et=b.write;MsPortalFx.extend(t,{initialValues:r.initialValues,marketplaceItem:r.marketplaceItem,telemetryId:r.telemetryId,validateTemplate:ft(n,u,r,w,y),deployTemplate:g(n,u,r,p,w,v,y),deployStack:tt(n,u,r,v,y),deployCustom:ut(u,r,v),getAutomationBladeReference:it(r),getArmErrorsBladeReference:rt(),setMarketplaceId:function(n){return __awaiter(k,void 0,void 0,(function(){var i,r,u;return __generator(this,(function(f){switch(f.label){case 0:return[4,et(n)];case 1:return i=f.sent(),r=i.marketplaceItem,u=i.uiDefinition,l=u,MsPortalFx.extend(t,{marketplaceItem:r}),[2,r]}}))}))}});Object.defineProperties(t,{policyValidationFactory:{get:function(){return a?(a.policyValidationFactoryUsed=!0,a.policyFactory):undefined}}});(o||u).registerForDispose((function(){v(!1)}))}var w;Object.defineProperty(t,"__esModule",{value:!0});t.DoesProvisioningContext=t.setProvisioning=t.getControlPolicyApi=void 0;var b=MsPortalFx.ViewModels,v=FxImpl.Azure.ResourceManager,k=function(){return __awaiter(void 0,void 0,void 0,(function(){var n;return __generator(this,(function(t){switch(t.label){case 0:return(n=o.getFeatureValue("fxarmcontrolpolicyapi"),n)?[3,2]:[4,e.Experimentation.experimentationValuesEndpoint.invoke(FxImpl.Rpc.client,MsPortalFx.Base.Constants.ExtensionNames.Hubs,["fxarmcontrolpolicyapi"]).then((function(n){return n[0]}))];case 1:n=t.sent();t.label=2;case 2:return[2,n]}}))}))};t.getControlPolicyApi=k;t.setProvisioning=p;w=(function(){function r(n,i,r,u){this.value=Q.all([f.provisioningContextEndpoint.invoke(i,"fx",{}),t.getControlPolicyApi()]).then((function(t){var f=t[0],e=t[1],i={};return p(n,i,f.provisioningInputs._provisioningContext,u,{id:r.bladeId,instanceId:r.bladeInstanceId},e),i}))}return r.DoesProvisioningContext=!0,__decorate([__metadata("fx:diagnostics",[n,"DoesProvisioningContext"]),i.Class("viewModel"),__metadata("design:paramtypes",[i.Container,FxImpl.Rpc.Client,u.PartContext,b.ContainerContract])],r)})();t.DoesProvisioningContext=w}));
define("FxInternal/WeaveControls/Section.Component.Internal",["require","exports","Weave/SandboxMode","Weave","FxInternal/Weave/Util","FxInternal/_generated/Less/WeaveControls/Section.Component.css"],(function(n,t,i,r,u,f){"use strict";function o(n,t){var o=n.disabled;return t=n.children||t,i(r.Fragment,null,i(r.Css,{css:f}),u.mapValueOrComputation(n.name,s),i(r.GetContext,{fn:function(f){return i(r.SetContext,{labelPosition:n.leftLabelPosition&&!n.leftLabelWidth&&!n.smartAlignLabel?e.Left:e.Top,leftLabelWidth:n.leftLabelWidth,disabled:u.aggregateDisabled([f.disabled,o]),tabIndex:u.aggregateTabindex([f.tabIndex],o)},r.isComputation(t)?i(r.ForEach,{collection:t,fn:function(n){return n.item}}):t)}}))}function s(n){return MsPortalFx.isNullOrUndefined(n)?null:i("div",{className:"fxc-section-legend azc-br-muted fxc-section-name"},n)}Object.defineProperty(t,"__esModule",{value:!0});t.SectionInner=void 0;var e=MsPortalFx.ViewModels.Forms.LabelPosition;t.SectionInner=o}));
define("FxInternal/Weave/Components/Section",["require","exports","Weave/SandboxMode","Weave","FxInternal/Weave/Util","FxInternal/WeaveControls/Section.Component.Internal","FxInternal/WeaveControls/ComponentHandleCore"],(function(n,t,i,r,u,f,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Section=void 0;var o=function(n,t){var s,o;n||(n={children:t});s=n.handle||e.makeSimpleComponentHandle();o=["fxc-section","fxc-section-wrapper"];(n.leftLabelWidth||n.smartAlignLabel)&&o.push("msportalfx-form");n.smartAlignLabel&&o.push("fxc-smart-labels");var h=r.makeWritableComputation(0),c=n.smartAlignLabel?h.compose((function(n){return n>480})):n.leftLabelWidth?u.trueComputation:u.falseComputation,l=i("div",{visible:n.visible,className:[o,{"msportalfx-form-regular":c,"fxc-left-label-fixed":c},n.className,],style:{"min-height":n.minHeight?n.minHeight+"px":undefined},onResize:function(n){var t=n.width;h(t)}},f.SectionInner(n,t));return e.wrapInsideAggregationNode(l,s,n.visible)};t.Section=o}));
define("FxInternal/WeaveControls/Tab.Component",["require","exports","FxInternal/Weave/Components/Tab"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});__exportStar(i,t)}))