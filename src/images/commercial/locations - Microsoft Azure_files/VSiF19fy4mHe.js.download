define("_generated/Less/MsPortalImpl.Controls/Controls/Forms/CopyableLabel.css",["module"],(function(e){"use strict";return{css:".fxc-copyablelabel{overflow:hidden;padding-right:28px;background-color:transparent}.fxc-copyablelabel .fxc-copyablelabel-textbox{box-sizing:border-box;float:left;width:100%}.fxc-copyablelabel .fxc-copyablelabel-textbox .azc-input{text-overflow:ellipsis}.fxc-copyablelabel .fxc-copyablelabel-textbox .azc-dockedballoon.azc-dockedballoon-validation{box-sizing:border-box}.fxc-copyablelabel .fxc-copyablelabel-alignbutton{float:none !important}.fxc-copyablelabel .fxc-copyablelabel-hideTextbox{display:none !important}.fxc-copyablelabel .fxc-copyablelabel-copybutton{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;overflow:hidden;display:table;border-width:0;margin-right:-28px;float:right;padding:0;outline-width:0}.fxc-copyablelabel .fxc-copyablelabel-copybutton.azc-button{min-width:0}.fxc-copyablelabel .fxc-copyablelabel-copybutton.azc-button .fxc-copyablelabel-copyimage{vertical-align:middle;text-align:center;display:table-cell;padding:3px;width:23px;height:23px;box-sizing:border-box;display:inline-block}.fxc-copyablelabel .fxc-copyablelabel-copybutton .fxc-copyablelabel-anchor{position:absolute;height:0;width:50%;top:20%;left:25%}.fxc-copyablelabel .fxc-copyablelabel-copybutton .azc-dockedballoon.azc-dockedballoon-validation .azc-dockedballoon-anchor{visibility:hidden}.fxc-copyablelabel .fxc-copyablelabel-copybutton .azc-dockedballoon.azc-dockedballoon-validation .azc-dockedballoon-anchor::before{color:transparent}.fxc-copyablelabel .fxc-copyablelabel-copybutton .fxs-button-default{border-width:1px}.fxc-copyablelabel-temp-element{position:absolute;left:-10000px;top:-10000px;background-color:#fff;color:#000}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel-textbox .azc-input{padding-right:25px}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel-textbox .azc-textarea{overflow:hidden}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel{padding-right:0}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel .fxc-copyablelabel-copybutton{border:1px solid transparent;background-color:transparent;margin:-22px 2px 0 0;padding:0 4px;height:20px}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel .fxc-copyablelabel-copybutton:focus{background-color:inherit}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel .fxc-copyablelabel-copybutton .fxc-copyablelabel-copyimage{width:12px !important;height:12px !important;padding:0 !important;margin-top:-7px}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel .fxc-copyablelabel-copybutton.fxs-inner-solid-border:focus::after{display:none}.fxc-summary-item-summary>.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel .fxc-copyablelabel-copybutton .fxc-copyablelabel-copyimage{margin-top:-7px}.fxs-highcontrast-dark .fxc-copyablelabel-copyimage .msportalfx-svg-palette-inherit{fill:white !important}.fxs-highcontrast-dark .fxs-copyfield .fxc-copyablelabel-copybutton:focus .fxc-copyablelabel-copyimage{fill:black}.fxs-highcontrast-light .fxc-copyablelabel-copyimage .msportalfx-svg-palette-inherit{fill:black !important}.fxs-highcontrast-light .fxs-copyfield .fxc-copyablelabel-copybutton:focus .fxc-copyablelabel-copyimage{fill:white}",moduleId:e.id}})),
define("MsPortalImpl.Controls/Controls/Forms/CopyableLabel",["require","exports","MsPortalImpl.Controls/Fields/Base/LabelAndBalloonWidget","MsPortalImpl.Controls/Controls/Base/Loadable","MsPortalImpl.Controls/Controls/DockedBalloon","FxInternal/Controls/InfoBalloon","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Forms/Viva.TextBox","Viva.Controls/Controls/Forms/Viva.MultiLineTextBox","Viva.Controls/Controls/Forms/Viva.Button","MsPortalImpl/Interactions/Interactions.PortalReader","FxInternal/Css","_generated/Less/MsPortalImpl.Controls/Controls/Forms/CopyableLabel.css","MsPortalImpl/Base/Base.BrowserDetection","SharedUtilities/ClipboardUtils"],(function(e,l,o,t,a,i,c,n,s,r,b,d,p,f,x){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Widget=void 0;var m=MsPortalFx.Base,y=m.Diagnostics.Telemetry.Context;(0,d.injectCss)(p);var h=MsPortalFx.getUniqueId;const u=c.Viva.CopyableLabel,g=u.Clipboard,C=g.hover,v="fxs-hide-accessible-label",k=MsPortalFx.ViewModels.Controls.DockedBalloon.Type.Validation;function w(e){const l=new i.ViewModel(e);return l.type=k,l}class I extends t.Widget{constructor(e,l,t){super(e,l,t),this._announce=new b.PortalReader(this.ltm,{idPrefix:"cplbl"}),this._showClickedTooltip=()=>null;const i=new r.ViewModel({ltm:this.ltm}),c=g.clicked,d=`fxc-copyablelabel-${h()}`,p=`fxc-copyablelabel-${h()}`;let I;const _=this.vmBasicOption,B=this.options._msPortalFxRows;B>1?(I=new s.ViewModel(_),I.rows(B)):I=new n.ViewModel(_),I.populateFromObject(this.options),I.disabled=ko.observable(!1),I.cssClass=null,e.addClass("msportalfx-form-formelement"),e.toggleClass("azc-fabric",!l.hideTextbox&&function(e){return!e.hasOwnProperty("hideValidationCheck")}(l));const z=new o.LabelAndBalloonWidgetHelper(this._diContainer,this.ltm,l);z.appendWidgetToDom(e,$(FxImpl.createElement("div",{class:"azc-formElementContainer"},FxImpl.createElement("div",{class:"fxc-copyablelabel"},FxImpl.createElement("div",{class:"fxc-copyablelabel-textbox"}))))),z.attachSubLabelClass(e),z.attachKeyboardEvents(e);const F=this.element.find(".azc-formElementContainer");z.insertLabelBefore(F),z.insertSubLabelAfter(F);const P=this.element.find(".fxc-copyablelabel"),M=P.find(".fxc-copyablelabel-textbox");let V;if(B>1){const e=new s.Widget(M,I);this._widgets.push(e),V=M.find("textarea:first").attr({"aria-multiline":!0}),V.focusin((function(){$(this).select()}))}else this._widgets.push(new n.Widget(M,I)),V=M.find("input:first");const L=l.readOnly&&l.readOnly(),T=this.$disabled&&this.$disabled();V.attr({"aria-readonly":!(!L&&!T),"aria-describedby":d}),ko.computed(this.ltm,[l.label,l.ariaLabel],((e,l)=>{V.attr("aria-label",l||(e||null))})),P.append(FxImpl.createElement("div",{class:"fxc-copyablelabel-copybutton","aria-labelledby":p},FxImpl.createElement("div",{class:"fxc-copyablelabel-clicked fxc-copyablelabel-anchor"}),FxImpl.createElement("div",{class:"fxc-copyablelabel-hover fxc-copyablelabel-anchor"}),FxImpl.createElement("div",{class:"fxc-copyablelabel-copyimage","data-bind":"image: $data.copyIcon"})),FxImpl.createElement("div",{class:v,id:d,"aria-hidden":"true"},MsPortalFx.encodeAttribute(f.isMac?u.macDescribedBy:u.describedBy)),FxImpl.createElement("div",{class:v,id:p,"aria-hidden":"true"},MsPortalFx.encodeAttribute(C))),this._bindDescendants({copyIcon:MsPortalFx.Base.Images.Copy({palette:99})},P.find(".fxc-copyablelabel-copybutton"));const E=P.find(`#${p}`)[0];ko.reactor(this.ltm,[l.ariaLabel,l.label],((e,l)=>{const o=e||l;E.textContent=o?g.name.format(o):C}));const D=P.find(">div.fxc-copyablelabel-copybutton"),W=D.find(">div.fxc-copyablelabel-hover"),O=D.find(">div.fxc-copyablelabel-clicked"),R=w(this.ltm);R.type=k,R.content(C),R.stopClickPropagation(!1),R.disabled(!0);const A=w(this.ltm);A.type=k,A.stopClickPropagation(!1),A.disabled(!0),l.hideTextbox&&(M.addClass("fxc-copyablelabel-hideTextbox"),D.addClass("fxc-copyablelabel-alignbutton"));const S=()=>{this._dockedBalloonHoverControl||(this._dockedBalloonHoverControl=new a.Widget(W,R,{},new a.WidgetUIState({diContainer:this._diContainer,vm:R}))),R.balloonVisible(!0)},H=()=>{[this._dockedBalloonHoverControl,this._dockedBalloonClickedControl].every((e=>{const l=(null==e?void 0:e._widgets)||null;null==l||l.every((e=>{null==e||e._mouseLeave()}))}))};D.hover(S,H),D.focusin(S),D.focusout(H),this.ltm.registerForDispose([D.setEvents(["keydown",e=>{112===e.which?(z.toggleBalloon(),e.preventDefault()):27===e.which&&(R.balloonVisible(!1),A.balloonVisible(!1)),e.stopPropagation()}])]),i.isDefault(!0),i.disabled(!1),i.click=async(e,o)=>{let t;this.element.trigger("fxcopybuttonclick"),function(e,l){if(l){const o=y.getBladeContext(),t={bladeId:null==o?void 0:o.id,bladeInstanceId:null==o?void 0:o.instanceId};m.Diagnostics.Telemetry.trace({source:"CopyableLabel",action:e,name:l,data:t})}}("ControlClicked",ko.unwrap(l.telemetryName)),t=B>1?I.value():I.value()&&I.value().replace(/\r?\n|\r/g,""),await x.writeToClipboard(t);const i=c;return A.content(i),this._announce.read(i),this._dockedBalloonClickedControl||(this._dockedBalloonClickedControl=new a.Widget(O,A,{},new a.WidgetUIState({diContainer:this._diContainer,vm:A}))),this._showClickedTooltip()||(this._showClickedTooltip=()=>(R.balloonVisible(!1),R.disabled(!0),A.disabled(!1),A.balloonVisible(!0),this._dockedBalloonClickedControl._widgets.every((e=>{(e||{})._balloonPinned=!1})),!0),this._showClickedTooltip()),!1};const U=new r.Widget(D,i);this._widgets.push(U),ko.computed(this.ltm,[l.readOnly,this.$disabled],((e,l)=>{const o=!(!e&&!l);P.toggleClass("fxc-copyablelabel-disabled",o),V&&(V.toggleClass("azc-bg-light",o),V.prop({readonly:o,tabindex:o?-1:0}),V.attr("aria-readonly",o))})),l.hideTextbox&&1===l.style&&(D.removeClass("fxs-portal-button-primary"),D.addClass("fxs-button-default")),l.value.subscribeAndRun(this.ltm,(e=>{V.attr("title",e)})),V.keydown((e=>{if(112===e.which)return z.toggleBalloon(),!1;27===e.which&&z.toggleBalloon(!1)}))}dispose(){this._checkExistsOrRegisterDestroyId(super.dispose)||(MsPortalFx.disposeDisposable(this._dockedBalloonClickedControl),MsPortalFx.disposeDisposable(this._dockedBalloonHoverControl),super.dispose(),this._cleanElement())}}l.Widget=I}));