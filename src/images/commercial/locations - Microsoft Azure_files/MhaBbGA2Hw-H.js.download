define("FxInternal/Controls/Accordion",["require","exports","Fx/Controls/Validations","FxInternal/Controls/Base/Base"],(function(n,t,i,r){"use strict";var u,f,e;Object.defineProperty(t,"__esModule",{value:!0});t.Section=t.ViewModel=void 0;u=MsPortalFx.initObservable;f=(function(n){function t(t,i){var r=n.call(this,t)||this,e,f;return r.controlType=127,r.canExpandMultipleSections=i.canExpandMultipleSections,r.canCollapseAllSections=i.canCollapseAllSections,r.disabled=u(i.disabled,!1),r.visible=u(i.visible,!0),r.cssClass=u(i.cssClass,""),r.ariaLabel=u(i.ariaLabel,""),r.noFxPadding=u(i.noFxPadding,!1),r.sections=MsPortalFx.initObservableArray(i.sections),r.valid=ko.observable(!0),r.dirty=ko.observable(!1),r.validationState=ko.observable(0),r.validators=ko.observableArray([{}]),i.canCollapseAllSections||(e=r.sections().every((function(n){return!n.expanded()})),e&&r.sections().length&&r.sections()[0].expanded(!0)),i.canExpandMultipleSections||(f=!0,r.sections().filter((function(n){return!!n.expanded()})).forEach((function(n){f?f=!1:n.expanded(!1)}))),r}return __extends(t,n),t})(r.ViewModel);t.ViewModel=f;e=(function(){function n(n,t){this.dirty=ko.observable(!1);this.validationState=ko.observable(0);this.expanded=u(t&&t.expanded,!1);this.title=u(t&&t.title);Q.isPromiseAlike(t.content)?(this.content=ko.observable(null),t.content.then(this.content)):this.content=ko.isObservable(t.content)?t.content:ko.observable(t.content)}return n})();t.Section=e}));
define("Fx/Controls/Accordion",["require","exports","FxInternal/Controls/Accordion"],(function(n,t,i){"use strict";function r(n,t){var r;return ko.ignoreDependencies((function(){r=new i.ViewModel(n,t)})),r}function u(n,t){var r;return ko.ignoreDependencies((function(){r=new i.Section(n,t)})),r}Object.defineProperty(t,"__esModule",{value:!0});t.createSection=t.create=void 0;t.create=r;t.createSection=u}));
define("FxInternal/Controls/HierarchicalDropDown",["require","exports","FxInternal/Controls/DropDown"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var r=(function(n){function t(t,i,r){var u=n.call(this,t,i,r)||this;return u.itemLoadingComplete=MsPortalFx.initObservable(!1),u.filterableProperties=i.filterableProperties||[],u}return __extends(t,n),t})(i.ViewModel);t.ViewModel=r}));
define("FxInternal/Controls/ManagementGroupDropDown",["require","exports","Fx/Ajax","FxInternal/Controls/HierarchicalDropDown","FxInternal/Resources/ManagementGroupDropDown","FxInternal"],(function(n,t,i,r,u,f){"use strict";function y(n,t,r){var u,f,e,o,s,h;return t===void 0&&(t=1),__awaiter(this,void 0,void 0,(function(){var l,c,y,p;return __generator(this,(function(w){switch(w.label){case 0:return l="".concat(v," ").concat((r===null||r===void 0?void 0:r.length)?"| where DisplayName has '".concat(r,"' or ResourceId has '").concat(r,"'"):""," | order by HierarchyLevel asc, ResourceId | extend rowNum = row_number() | where rowNum >= ").concat(t),[4,i.batch({type:"POST",uri:a,setTelemetryHeader:"Microsoft_Azure_ManagementGroups.",requestHeaderDictionary:{"x-ms-command-name":["Microsoft_Azure_ManagementGroups."]},content:{query:l,managementGroups:[n]}})];case 1:return c=w.sent(),y=(f=(u=c===null||c===void 0?void 0:c.content)===null||u===void 0?void 0:u.totalRecords)!==null&&f!==void 0?f:0,p=(o=(e=c===null||c===void 0?void 0:c.content)===null||e===void 0?void 0:e.count)!==null&&o!==void 0?o:0,[2,{data:(h=(s=c===null||c===void 0?void 0:c.content)===null||s===void 0?void 0:s.data)!==null&&h!==void 0?h:[],partialResult:y>p}]}}))}))}var s;Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=t.ArgResourceType=void 0;var o=MsPortalFx.Base,h=MsPortalFx.Base.Security,c=MsPortalFx.Resources.Strings.Azure.ManagmenetGroups.DropDown,l=o.Promises.makeCancelable,a="".concat(i.getEndpoints().arm,"providers/Microsoft.ResourceGraph/resources?api-version=2021-03-01"),v="ResourceContainers| where type =~ 'microsoft.management/managementGroups'| project ResourceId = name, DisplayName = tostring(properties.displayName), ParentDisplayName = tostring(properties.details.parent.displayName), HierarchyLevel = array_length(properties.details.managementGroupAncestorsChain), ParentId = tostring(properties.details.parent.name), type, tenantId| extend hasDirectAccess = 1| join kind=fullouter (resourcecontainers| where type == 'microsoft.management/managementgroups'| project tenantId, type, original = properties.details.managementGroupAncestorsChain, mgChain = properties.details.managementGroupAncestorsChain| mv-expand with_itemindex= MGIndex mgChain| project ResourceId = tostring(mgChain.name), DisplayName = tostring(mgChain.displayName), tenantId, HierarchyLevel = array_length(original) - MGIndex - 1, ParentId = tostring(original[MGIndex + 1].name), ParentDisplayName = tostring(original[MGIndex + 1].displayName)| summarize DisplayName = any(DisplayName), tenantId = any(tenantId), HierarchyLevel = any(HierarchyLevel), ParentId = any(ParentId), ParentDisplayName = any(ParentDisplayName) by ResourceId) on ResourceId| project ResourceId = iff(isempty(ResourceId), ResourceId1, ResourceId), DisplayName = iff(isempty(DisplayName), DisplayName1, DisplayName),ParentDisplayName = iff(isempty(ParentDisplayName), ParentDisplayName1, ParentDisplayName),HierarchyLevel = iff(isempty(HierarchyLevel), HierarchyLevel1, HierarchyLevel), ParentId = iff(isempty(ParentId), ParentId1, ParentId),hasDirectAccess = iff(isnull(hasDirectAccess), int(null), 1),type, tenantId| join kind=fullouter (Resourcecontainers| where type == 'microsoft.resources/subscriptions'| extend selfAsMg = pack_array(pack('displayName', name, 'name', subscriptionId))| project id, type, tenantId, mgChain = array_concat(selfAsMg, properties.managementGroupAncestorsChain)| extend original = mgChain| mv-expand with_itemindex=MGIndex mgChain| extend IsImmediateChild = (MGIndex == 1)| extend HierarchyLevel = array_length(original) - MGIndex - 1, ResourceId = tostring(mgChain.name), DisplayName = tostring(mgChain.displayName), ParentId = tostring(original[MGIndex + 1].name), ParentDisplayName = tostring(original[MGIndex + 1].displayName)| summarize totalSubCount = countif(MGIndex > 0), immediateChildSubCount = countif(IsImmediateChild), HierarchyLevel = any(HierarchyLevel), ParentId = any(ParentId), type = anyif(type, MGIndex == 0), DisplayName = any(DisplayName), ParentDisplayName = any(ParentDisplayName), hasDirectAccess = anyif(1, MGIndex == 0), tenantId = any(tenantId) by ResourceId) on ResourceId| project ResourceId = iff(isempty(ResourceId), ResourceId1, ResourceId), DisplayName = iff(isempty(DisplayName), DisplayName1, DisplayName), HierarchyLevel = iff(isnull(HierarchyLevel), HierarchyLevel1, HierarchyLevel), ParentId = iff(isempty(ParentId), ParentId1, ParentId), ParentDisplayName = iff(isempty(ParentDisplayName), ParentDisplayName1, ParentDisplayName), totalSubCount = iff(isnull(totalSubCount), 0, totalSubCount), immediateChildSubCount = iff(isnull(immediateChildSubCount), 0, immediateChildSubCount), type = iff(isempty(type), iff(isempty(type1), 'microsoft.management/managementGroups', type1), type), hasDirectAccess = iff(isnull(hasDirectAccess) and isnull(hasDirectAccess1) , 'false', 'true'), tenantId = iff(isempty(tenantId), tenantId1, tenantId)",e;(function(n){n.ManagementGroup="microsoft.management/managementgroups";n.Subscription="microsoft.resources/subscriptions"})(e=t.ArgResourceType||(t.ArgResourceType={}));s=(function(n){function t(t,i){var r=n.call(this,t,{multiselect:i===null||i===void 0?void 0:i.multiSelect,selectAll:!0,filter:!0,filterableProperties:["displayName","id"],loading:MsPortalFx.initObservable(!0),placeholder:c.placeHolder,ariaLabel:(i===null||i===void 0?void 0:i.ariaLabel)||u.ManagementGroupDropDown.ariaLabel,multiItemDisplayText:u.ManagementGroupDropDown.xSelected,validations:i===null||i===void 0?void 0:i.validations})||this;return r.value=ko.observable(null),r.fetchedValues=ko.observableArray(),r._fetchedValues=[],r._itemsMap={},r._rootMgId=ko.observable(""),r._cancellationToken=new o.Promises.CancelationToken,r.controlType=210,r.items([MsPortalFx.clone(r._itemsMap[r._rootMgId()],!0)]),r._disableItem=i.disableItem,t.registerForDispose((function(){r._cancellationToken.cancel()})),void h.getUserInfo().then((function(n){r._rootMgId(n.directoryId);void r._fetch(r._rootMgId(),1).then((function(){void r._processDisabledItems().then((function(){r.items([MsPortalFx.clone(r._itemsMap[r._rootMgId()],!0)])}))})).catch((function(n){if(!(n instanceof MsPortalFx.Errors.CanceledError))throw n;})).finally((function(){r.fetchedValues(r._fetchedValues);r.loading(!1);r.itemLoadingComplete(!0)}))})),r}return __extends(t,n),t.prototype._processDisabledItems=function(){return __awaiter(this,void 0,void 0,(function(){var t,n=this;return __generator(this,(function(i){switch(i.label){case 0:return this._disableItem?(t=[],f.forEachKey(this._itemsMap,(function(i){var r=n._itemsMap[i];t.push(n._disableItem(r.value).then((function(n){var t;(t=r.disabled)!==null&&t!==void 0?t:r.disabled=ko.observable(n)})))})),[4,Promise.all(t).then((function(){n.items([MsPortalFx.clone(n._itemsMap[n._rootMgId()],!0)])}))]):[3,2];case 1:i.sent();i.label=2;case 2:return[2]}}))}))},t.prototype._fetch=function(n,t){var i=this;return l(y(n,t),this._cancellationToken).then((function(r){if(i._buildMGTree(r.data),t===1&&r.partialResult&&void i._processDisabledItems().then((function(){i.items([i._itemsMap[i._rootMgId()]]);i.loading(!1)})),r.partialResult)return i._fetch(n,t+1e3);i.loading(!1)}))},t.prototype._buildMGTree=function(n){var i=this,t=function(n,t){var r,u;return(r=(u=i._itemsMap)[n])!==null&&r!==void 0?r:u[n]={text:t,children:[],value:null,depth:0,expanded:ko.observable(!1)}};(n||[]).forEach((function(n){var r,u;n.type&&n.type.toLocaleLowerCase()!==e.ManagementGroup?n.type.toLocaleLowerCase()===e.Subscription&&(u=t(n.ParentId,n.ParentDisplayName),u.value.childSubscriptionIds.push(n.ResourceId)):(r=t(n.ResourceId,n.DisplayName),r.value={id:n.ResourceId,displayName:n.DisplayName,parentId:n.ParentId,childManagementGroupIds:[],childSubscriptionIds:[]},i._fetchedValues.push(r.value),r.depth=n.HierarchyLevel,n.ParentId&&(u=t(n.ParentId,n.ParentDisplayName),u.children.push(r),u.value.childManagementGroupIds.push(r.value.id),u.expanded(!0)))}))},t})(r.ViewModel);t.ViewModel=s}));
define("Fx/Controls/ManagementGroupDropDown",["require","exports","FxInternal/Controls/ManagementGroupDropDown"],(function(n,t,i){"use strict";function r(n,t){var r;return ko.ignoreDependencies((function(){r=new i.ViewModel(n,t)})),r}Object.defineProperty(t,"__esModule",{value:!0});t.create=void 0;t.create=r}));
define("FxInternal/Controls/SearchBox",["require","exports","FxInternal/Controls/Base/Base"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var r=(function(n){function t(t,i){var r=n.call(this,t)||this;return r._msPortalFxValue=ko.observable(),i=i||{update:function(){return Q([])}},r.controlType=93,r.defaultText="",r.submit=i.submit,r.update=i.update,r.hideSuggestions=MsPortalFx.initObservable(i.hideSuggestions,!1),r.placeHolderText=MsPortalFx.initObservable(i.placeHolderText,MsPortalFx.Resources.Strings.ViewModels.Controls.search),r.placeholder=r.placeHolderText,r.valueUpdateTimeout=MsPortalFx.initValue(i.valueUpdateTimeout,400),r.updateFrequency=r.valueUpdateTimeout,r.resultLimit=MsPortalFx.initObservable(i.resultLimit,5),r.disabled=MsPortalFx.initObservable(i.disabled,!1),r.ariaLabel=MsPortalFx.initObservable(i.ariaLabel,""),r._msPortalFxresetTrigger=MsPortalFx.initObservable(),r}return __extends(t,n),t.prototype.updateValue=function(n){this._msPortalFxValue(n)},t.prototype.reset=function(){var n=this._msPortalFxresetTrigger;return n()?n()():Q()},t})(i.ViewModel);t.ViewModel=r}));
define("Fx/Controls/SearchBox",["require","exports","FxInternal/Controls/SearchBox"],(function(n,t,i){"use strict";function r(n,t){var r;return ko.ignoreDependencies((function(){r=new i.ViewModel(n,t)})),r}Object.defineProperty(t,"__esModule",{value:!0});t.create=void 0;t.create=r}));
define("FxInternal/Controls/Splitter2",["require","exports","FxInternal/Controls/Base/Base"],(function(n,t,i){"use strict";var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.Pane=t.ViewModel=void 0;r=MsPortalFx.initObservable;u=(function(n){function t(t,i){var u=n.call(this,t)||this;return u.controlType=207,u.orientation=r(i&&i.orientation,0),u.primaryPane=r(i&&i.primaryPane),u.secondaryPane=r(i&&i.secondaryPane),u.primaryPaneSize=r(i&&i.primaryPaneSize,"50%"),u.primaryPane().collapsed.subscribeAndRun(u.lifetimeManager,(function(n){n&&u.secondaryPane().collapsed()&&u.secondaryPane().collapsed(!1)})),u.secondaryPane().collapsed.subscribeAndRun(u.lifetimeManager,(function(n){n&&u.primaryPane().collapsed()&&u.primaryPane().collapsed(!1)})),u}return __extends(t,n),t})(i.ViewModel);t.ViewModel=u;f=(function(){function n(n,t){var i=this;this.loading=ko.observable(!1);this.minSize=r(t&&t.minSize,0);this.ariaLabel=r(t&&t.ariaLabel,"");this.collapsible=r(t&&t.collapsible,!1);this.collapsed=r(t&&t.collapsed,!1);Q.isPromiseAlike(t.content)?(this.loading(!0),this.content=ko.observable(null),t.content.then(this.content).then((function(){return i.loading(!1)}))):this.content=ko.isObservable(t.content)?t.content:ko.observable(t.content)}return n})();t.Pane=f}));
define("Fx/Controls/Splitter2",["require","exports","FxInternal/Controls/Splitter2"],(function(n,t,i){"use strict";function r(n,t){var r;return ko.ignoreDependencies((function(){r=new i.ViewModel(n,t)})),r}function u(n,t){var r;return ko.ignoreDependencies((function(){r=new i.Pane(n,t)})),r}Object.defineProperty(t,"__esModule",{value:!0});t.createPane=t.create=void 0;t.create=r;t.createPane=u}));
define("FxInternal/Controls/Toggle",["require","exports","FxInternal/Controls/Base/FormsBase"],(function(n,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewModel=void 0;var r=MsPortalFx.initObservable,u=(function(n){function t(t,i){var u=n.call(this,t,i)||this;return u.controlType=205,u.value=r(i.value,!1),u.valueText=r(i.valueText,null),u}return __extends(t,n),t})(i.ViewModel);t.ViewModel=u}));
define("Fx/Controls/Toggle",["require","exports","FxInternal/Controls/Toggle"],(function(n,t,i){"use strict";function r(n,t){var r;return ko.ignoreDependencies((function(){r=new i.ViewModel(n,t)})),r}Object.defineProperty(t,"__esModule",{value:!0});t.create=void 0;t.create=r}));
define("Fx/Controls/TreeView",["require","exports","FxInternal/Controls/TreeView"],(function(n,t,i){"use strict";function r(n,t){return i.create(n,t)}Object.defineProperty(t,"__esModule",{value:!0});t.create=void 0;t.create=r}));
define("FxHubs/Common/BrowseCuration",["require","exports","FxHubs/RpcEndPoints","Fx"],(function(n,t,i,r){"use strict";function e(n){return Q(MsPortalFx.retryPromise((function(){return f().then(n)}),10,1e3))}Object.defineProperty(t,"__esModule",{value:!0});t.getMergedAssetTypes=t.getResourceTypesCategorization=void 0;var u=MsPortalFx.Base.Constants,f=r.memoizePromise((function(){return Q(i.Curation.getSharedCurationEndpoint.invoke(FxImpl.Rpc.client,u.Shell,undefined))}));t.getResourceTypesCategorization=r.memoizePromise((function(){return Q(i.Curation.getResourceTypesCategorizationEndPoint.invoke(FxImpl.Rpc.client,u.Shell,null))}));t.getMergedAssetTypes=r.memoizePromise((function(){return e((function(n){return n.mergedAssetTypes||[]}))}))}))