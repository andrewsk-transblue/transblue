define("MsPortalImpl/Weave/SandboxDomAgents/Tab",["require","exports","MsPortalImpl/Interactions/Interactions.DismissHandler"],(function(e,s,t){"use strict";function n(e){return $(e).parents(".fxc-tabs-menu-open:eq(0)")[0]?0:1}Object.defineProperty(s,"__esModule",{value:!0}),s.attachDomAgent=void 0,s.attachDomAgent=function(e,s){const i=$(e);let o;function a(){const e=i.find(".fxc-tabs-menu:eq(0)"),c=e.children("span"),r=!o;if(c.attr("aria-expanded",r?"true":"false"),e.toggleClass("fxc-tabs-menu-open",r),r){(0,t.dismissByLogName)("tab menu");const i={dismissFn:a,shouldDismissOnFocusOutFn:n,shouldDismissOnMouseDownFn:n,shouldDismissOnMouseWheelFn:n,logName:"tab menu"};(0,t.register)(i),o=s.createChildLifetime(),o.registerForDispose((()=>{(0,t.unregister)(i)})),e.children(".fxc-tabs-itemslist").children("[tabindex=0]").focus()}else o.dispose(),o=null,c.focus()}s.registerForDispose(i.setEvents(["click",".fxc-tabs-menu:eq(0) > span",a],["keydown",".fxc-tabs-menu:eq(0) > span",e=>{13!==e.which&&32!==e.which||(e.preventDefault(),a())}],["keydown",".fxc-section-tab-item",e=>{37!==e.which&&39!==e.which&&38!==e.which&&40!==e.which||e.preventDefault()}]))}}));